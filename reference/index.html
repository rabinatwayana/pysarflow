<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://rabinatwayana.github.io/pysarflow/reference/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Reference - pysarflow</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Reference";
        var mkdocs_page_input_path = "reference.md";
        var mkdocs_page_url = "/pysarflow/reference/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> pysarflow
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Reference</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow">pysarflow</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd">grd</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.apply_orbit_file">apply_orbit_file</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.band_difference">band_difference</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.border_noise_removal">border_noise_removal</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.conversion_to_db">conversion_to_db</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.export">export</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.generateFloodMask">generateFloodMask</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.maskPermanentWater">maskPermanentWater</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.plotBand">plotBand</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.preprocess_grd_product">preprocess_grd_product</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.radiometric_calibration">radiometric_calibration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.read_grd_product">read_grd_product</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.speckle_filter">speckle_filter</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.grd.speckle_filter--parameters">Parameters:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.grd.speckle_filter--returns">Returns:</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.stack">stack</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.subset_AOI">subset_AOI</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.terrain_correction">terrain_correction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.grd.thermal_noise_removal">thermal_noise_removal</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc">slc</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.apply_orbit">apply_orbit</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.back_geocoding">back_geocoding</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.burst_for_geometry">burst_for_geometry</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.enhanced_spectral_diversity">enhanced_spectral_diversity</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.goldstein_phase_filtering">goldstein_phase_filtering</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.goldstein_phase_filtering--args">Args:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.goldstein_phase_filtering--returns">Returns:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.goldstein_phase_filtering--notes">Notes:</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.interferogram">interferogram</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.interferogram--args">Args:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.interferogram--returns">Returns:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.interferogram--notes">Notes:</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.multilooking">multilooking</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.phase_to_elevation">phase_to_elevation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.phase_to_elevation--args">Args:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.phase_to_elevation--returns">Returns:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.phase_to_elevation--notes">Notes:</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.plot">plot</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.read_slc_product">read_slc_product</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.save_product">save_product</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.save_product--args">Args</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.save_product--returns">Returns</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.snaphu_export">snaphu_export</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_export--parameters">Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_export--returns">Returns</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_export--raises">Raises</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_export--notes">Notes</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.snaphu_import">snaphu_import</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_import--parameters">Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_import--returns">Returns</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_import--notes">Notes</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.snaphu_unwrapping">snaphu_unwrapping</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_unwrapping--parameters">Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_unwrapping--returns">Returns</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_unwrapping--raises">Raises</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.snaphu_unwrapping--notes">Notes</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.temporal_baseline">temporal_baseline</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.temporal_baseline--args">Args:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.temporal_baseline--notes">Notes:</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.terrain_correction_slc">terrain_correction_slc</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.terrain_correction_slc--args">Args</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.terrain_correction_slc--returns">Returns</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.terrain_correction_slc--notes">Notes</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.topsar_deburst">topsar_deburst</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.topsar_deburst--args">Args</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.slc.topsar_deburst--returns">Returns</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.slc.topsar_split">topsar_split</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.utils">utils</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.utils.convert_0_to_nan">convert_0_to_nan</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.utils.extract_bbox">extract_bbox</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.utils.extract_info">extract_info</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.utils.extract_info--parameters">Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.utils.extract_info--prints">Prints</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.utils.extract_info--notes">Notes</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pysarflow.utils.get_subswath">get_subswath</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.utils.get_subswath--parameters">Parameters:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.utils.get_subswath--returns">Returns:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pysarflow.utils.get_subswath--notes">Notes:</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../dev/">Contribute</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../examples/slc_earthquake_mapping/">SLC</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../examples/grd_flood_mapping/">GRD</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">pysarflow</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Reference</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/rabinatwayana/pysarflow/edit/master/docs/reference.md">Edit on rabinatwayana/pysarflow</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="api-reference">API Reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>
<!-- ::: pysarflow -->

<h2 id="pysarflow"><code>pysarflow</code><a class="headerlink" href="#pysarflow" title="Permanent link">&para;</a></h2>
<!-- ::: pysarflow -->



<div class="doc doc-object doc-module">



<a id="pysarflow.grd"></a>
    <div class="doc doc-contents first">

        <p>Preprocessing Sentinel1 GRD Data.</p>
<p>This Python script enables users to perform essential preprocessing steps
on Sentinel-1 GRD data, including thermal noise removal, radiometric calibration,
and terrain correction.</p>
<p>It accepts Sentinel-1 products in the .SAFE format.</p>
<p>The script depends on the 'esa_snappy' library, which must be installed
in the Python environment where this script is executed.</p>


<details class="this-file-can-also-be-imported-as-a-module-and-contains-the-following-functions" open>
  <summary>This file can also be imported as a module and contains the following functions</summary>
  <p>Major:
    * read_grd_product
Supporting:
    *</p>
</details>








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.apply_orbit_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_orbit_file</span><span class="p">(</span><span class="n">product</span><span class="p">)</span></code>

<a href="#pysarflow.grd.apply_orbit_file" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Apply precise satellite orbit file to the SAR product.</p>
<p>This operation orthorectifies the SAR product to improve accuracy by using
precise orbit information.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>The input SAR Product object.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: The product with orbit file applied.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="k">def</span><span class="w"> </span><span class="nf">apply_orbit_file</span><span class="p">(</span><span class="n">product</span><span class="p">):</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="sd">    Apply precise satellite orbit file to the SAR product.</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="sd">    This operation orthorectifies the SAR product to improve accuracy by using</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="sd">    precise orbit information.</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">        product (esa_snappy.Product): The input SAR Product object.</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">        esa_snappy.Product: The product with orbit file applied.</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Applying Orbit File...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span class="s2">&quot;orbitType&quot;</span><span class="p">,</span> <span class="s2">&quot;Sentinel Precise (Auto Download)&quot;</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span class="p">)</span>  <span class="c1"># &#39;Sentinel Precise (Auto Download) specifically for Sentinel-1</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="s2">&quot;continueOnFail&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="p">)</span>  <span class="c1"># Do not continue if orbit file application fails</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Apply-Orbit-File&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Orbit File applied.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.band_difference" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">band_difference</span><span class="p">(</span><span class="n">product_stacked</span><span class="p">)</span></code>

<a href="#pysarflow.grd.band_difference" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Computes the difference between two bands of a stacked SAR product.</p>
<p>A new band named 'Difference_Band' is created, calculated as:
    Difference_Band = band2 - band1</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product_stacked</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>Input SAR product with at least two bands (e.g., pre- and post-event).</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: A new product containing the 'Difference_Band'.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="RuntimeError">RuntimeError</span></code>
              –
              <div class="doc-md-description">
                <p>If the BandMaths operation fails.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="k">def</span><span class="w"> </span><span class="nf">band_difference</span><span class="p">(</span><span class="n">product_stacked</span><span class="p">):</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">    Computes the difference between two bands of a stacked SAR product.</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="sd">    A new band named &#39;Difference_Band&#39; is created, calculated as:</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="sd">        Difference_Band = band2 - band1</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="sd">        product_stacked (esa_snappy.Product): Input SAR product with at least two bands (e.g., pre- and post-event).</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="sd">        esa_snappy.Product: A new product containing the &#39;Difference_Band&#39;.</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">        RuntimeError: If the BandMaths operation fails.</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>        <span class="n">band_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">product_stacked</span><span class="o">.</span><span class="n">getBandNames</span><span class="p">())</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>        <span class="n">BandDescriptor</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a>            <span class="s2">&quot;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&quot;</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>        <span class="p">)</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>        <span class="c1"># Create a BandDescriptor object</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>        <span class="n">band_def</span> <span class="o">=</span> <span class="n">BandDescriptor</span><span class="p">()</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>        <span class="n">band_def</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Difference_Band&quot;</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>        <span class="n">band_def</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;float32&quot;</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>        <span class="n">band_def</span><span class="o">.</span><span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">band_names</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">band_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># Ensure these band names exist in product_stacked</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a>        <span class="n">band_def</span><span class="o">.</span><span class="n">noDataValue</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>        <span class="n">band_def</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Post - Pre difference&quot;</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>        <span class="c1"># Create a Java array of BandDescriptor</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>        <span class="n">Array</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s2">&quot;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>        <span class="n">targetBands</span> <span class="o">=</span> <span class="n">Array</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>        <span class="n">targetBands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">band_def</span>  <span class="c1"># Assign band_def to the first index of the array</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>        <span class="c1"># Parameters HashMap</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;java.util.HashMap&quot;</span><span class="p">)()</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;targetBands&quot;</span><span class="p">,</span> <span class="n">targetBands</span><span class="p">)</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>        <span class="c1"># Run BandMaths</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>        <span class="n">diff_product</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;BandMaths&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product_stacked</span><span class="p">)</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>        <span class="k">return</span> <span class="n">diff_product</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Terrain correction failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.border_noise_removal" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">border_noise_removal</span><span class="p">(</span><span class="n">product</span><span class="p">)</span></code>

<a href="#pysarflow.grd.border_noise_removal" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Remove border noise from the SAR product.</p>
<p>Border noise appears as a low-backscatter band along the image edges
and can affect SAR measurements near scene boundaries. This operation
trims the noisy border region to improve data quality.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>The input SAR Product object.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: The product after border noise removal.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="k">def</span><span class="w"> </span><span class="nf">border_noise_removal</span><span class="p">(</span><span class="n">product</span><span class="p">):</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove border noise from the SAR product.</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">    Border noise appears as a low-backscatter band along the image edges</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">    and can affect SAR measurements near scene boundaries. This operation</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">    trims the noisy border region to improve data quality.</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">        product (esa_snappy.Product): The input SAR Product object.</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">        esa_snappy.Product: The product after border noise removal.</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Performing border noise removal...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;borderLimit&quot;</span><span class="p">,</span> <span class="s2">&quot;500&quot;</span><span class="p">)</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;trimThreshold&quot;</span><span class="p">,</span> <span class="s2">&quot;0.5&quot;</span><span class="p">)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Remove-GRD-Border-Noise&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Border noise removed.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.conversion_to_db" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">conversion_to_db</span><span class="p">(</span><span class="n">product</span><span class="p">)</span></code>

<a href="#pysarflow.grd.conversion_to_db" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Converts SAR backscatter values from linear scale to decibels (dB).</p>
<p>This transformation is commonly applied to Sentinel-1 GRD products
after radiometric calibration, as dB units are easier to interpret
and compare across scenes.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code><span title="snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>Input SAR product in linear scale.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: Product with backscatter values expressed in dB.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="k">def</span><span class="w"> </span><span class="nf">conversion_to_db</span><span class="p">(</span><span class="n">product</span><span class="p">):</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="sd">    Converts SAR backscatter values from linear scale to decibels (dB).</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">    This transformation is commonly applied to Sentinel-1 GRD products</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">    after radiometric calibration, as dB units are easier to interpret</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">    and compare across scenes.</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">        product (snappy.Product): Input SAR product in linear scale.</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="sd">        esa_snappy.Product: Product with backscatter values expressed in dB.</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;linearToFromdB&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Conversion complete.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.export" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">export</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">output_path</span><span class="p">)</span></code>

<a href="#pysarflow.grd.export" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Exports a SNAP product as a GeoTIFF file.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code><span title="snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>The processed SNAP product to export.</p>
              </div>
            </li>
            <li>
              <b><code>output_path</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>Destination .tif file path.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">output_path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><span class="sd">    Exports a SNAP product as a GeoTIFF file.</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="sd">        product (snappy.Product): The processed SNAP product to export.</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="sd">        output_path (str): Destination .tif file path.</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>    <span class="c1"># Ensure output directory exists</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output_path</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exporting product to </span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s2"> (GeoTIFF)...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>    <span class="n">ProductIO</span><span class="o">.</span><span class="n">writeProduct</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;GeoTIFF&quot;</span><span class="p">)</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Export complete.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.generateFloodMask" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generateFloodMask</span><span class="p">(</span><span class="n">product_masked</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span></code>

<a href="#pysarflow.grd.generateFloodMask" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Generates a flood mask from a masked difference band in a SAR product.</p>
<p>The function creates a new band called 'flooded', where pixels are classified as:
    - -9999.0: NoData
    - 0: Permanent water
    - 1: Flooded
    - 2: Others</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product_masked</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>Input SAR product with masked difference band.</p>
              </div>
            </li>
            <li>
              <b><code>threshold</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.1</code>
)
              –
              <div class="doc-md-description">
                <p>Threshold for identifying flooded pixels. Default is 0.1.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: A new product with a 'flooded' band representing the flood mask.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="RuntimeError">RuntimeError</span></code>
              –
              <div class="doc-md-description">
                <p>If the BandMaths operation fails.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="k">def</span><span class="w"> </span><span class="nf">generateFloodMask</span><span class="p">(</span><span class="n">product_masked</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a><span class="sd">    Generates a flood mask from a masked difference band in a SAR product.</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="sd">    The function creates a new band called &#39;flooded&#39;, where pixels are classified as:</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="sd">        - -9999.0: NoData</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">        - 0: Permanent water</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a><span class="sd">        - 1: Flooded</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a><span class="sd">        - 2: Others</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a><span class="sd">        product_masked (esa_snappy.Product): Input SAR product with masked difference band.</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a><span class="sd">        threshold (float, optional): Threshold for identifying flooded pixels. Default is 0.1.</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a><span class="sd">        esa_snappy.Product: A new product with a &#39;flooded&#39; band representing the flood mask.</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="sd">        RuntimeError: If the BandMaths operation fails.</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>        <span class="n">BandDescriptor</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>            <span class="s2">&quot;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&quot;</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>        <span class="p">)</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>        <span class="n">targetBand</span> <span class="o">=</span> <span class="n">BandDescriptor</span><span class="p">()</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>        <span class="n">targetBand</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;flooded&quot;</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>        <span class="n">targetBand</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;float32&quot;</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>        <span class="c1"># Threshold the masked difference band</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>        <span class="n">targetBand</span><span class="o">.</span><span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;(Permanent_Water_Masked == -9999.0 ? -9999.0 : (Permanent_Water_Masked == 0 ? 0 : (Permanent_Water_Masked &gt; </span><span class="si">{</span><span class="n">threshold</span><span class="si">}</span><span class="s2"> ? 1 : 2)))&quot;</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>        <span class="n">targetBands</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>            <span class="s2">&quot;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&quot;</span><span class="p">,</span> <span class="mi">1</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>        <span class="p">)</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>        <span class="n">targetBands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">targetBand</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;targetBands&quot;</span><span class="p">,</span> <span class="n">targetBands</span><span class="p">)</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>        <span class="n">binary_flood</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;BandMaths&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product_masked</span><span class="p">)</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>        <span class="k">return</span> <span class="n">binary_flood</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Terrain correction failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.maskPermanentWater" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">maskPermanentWater</span><span class="p">(</span><span class="n">product</span><span class="p">)</span></code>

<a href="#pysarflow.grd.maskPermanentWater" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Masks permanent water areas in a SAR product using land cover data.</p>
<p>The function first adds a land cover band to the input product, then creates a
binary water mask based on GlobCover classification (210 = water). Finally, it
applies the mask to the SAR product, creating a permanent water masked while
preserving NoData values.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>Input SAR product.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: SAR product with permanent water masked, containing
                a 'Permanent_Water_Masked' band.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="RuntimeError">RuntimeError</span></code>
              –
              <div class="doc-md-description">
                <p>If masking or band math operations fail.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-351" name="__codelineno-0-351"></a><span class="k">def</span><span class="w"> </span><span class="nf">maskPermanentWater</span><span class="p">(</span><span class="n">product</span><span class="p">):</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">    Masks permanent water areas in a SAR product using land cover data.</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a><span class="sd">    The function first adds a land cover band to the input product, then creates a</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">    binary water mask based on GlobCover classification (210 = water). Finally, it</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="sd">    applies the mask to the SAR product, creating a permanent water masked while</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="sd">    preserving NoData values.</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="sd">        product (esa_snappy.Product): Input SAR product.</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">        esa_snappy.Product: SAR product with permanent water masked, containing</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">                            a &#39;Permanent_Water_Masked&#39; band.</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="sd">        RuntimeError: If masking or band math operations fail.</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Masking permanent waster based on landcover data&quot;</span><span class="p">)</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>        <span class="c1"># Add land cover band</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;landCoverNames&quot;</span><span class="p">,</span> <span class="s2">&quot;GlobCover&quot;</span><span class="p">)</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>        <span class="n">mask_with_land_cover</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;AddLandCover&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>        <span class="k">del</span> <span class="n">parameters</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>        <span class="c1"># Create binary water band</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>        <span class="n">BandDescriptor</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>            <span class="s2">&quot;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&quot;</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>        <span class="p">)</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>        <span class="n">targetBand</span> <span class="o">=</span> <span class="n">BandDescriptor</span><span class="p">()</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>        <span class="n">targetBand</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;BinaryWater&quot;</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>        <span class="n">targetBand</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;uint8&quot;</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>        <span class="n">targetBand</span><span class="o">.</span><span class="n">expression</span> <span class="o">=</span> <span class="s2">&quot;(land_cover_GlobCover == 210) ? 0 : 1&quot;</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>        <span class="n">targetBands</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>            <span class="s2">&quot;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&quot;</span><span class="p">,</span> <span class="mi">1</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>        <span class="p">)</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>        <span class="n">targetBands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">targetBand</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;targetBands&quot;</span><span class="p">,</span> <span class="n">targetBands</span><span class="p">)</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>        <span class="n">water_mask</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;BandMaths&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">mask_with_land_cover</span><span class="p">)</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>        <span class="k">del</span> <span class="n">parameters</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>        <span class="n">BandDescriptor</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>            <span class="s2">&quot;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&quot;</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>        <span class="p">)</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>        <span class="n">water_mask</span><span class="o">.</span><span class="n">addBand</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">getBand</span><span class="p">(</span><span class="s2">&quot;Sigma0_VV&quot;</span><span class="p">))</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>        <span class="n">targetBand</span> <span class="o">=</span> <span class="n">BandDescriptor</span><span class="p">()</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>        <span class="n">targetBand</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Permanent_Water_Masked&quot;</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>        <span class="n">targetBand</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;float32&quot;</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>        <span class="n">targetBand</span><span class="o">.</span><span class="n">expression</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>            <span class="s2">&quot;(Sigma0_VV == -9999.0) ? -9999.0 : ((BinaryWater == 1) ? Sigma0_VV : 0)&quot;</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>        <span class="p">)</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>        <span class="c1"># targetBand.expression = &#39;(BinaryWater == 1) ? Sigma0_VV : 0&#39;</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>        <span class="c1"># targetBand.expression = &#39;(BinaryWater == 1) ? Difference_Band : 0&#39;</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>        <span class="n">targetBands</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>            <span class="s2">&quot;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&quot;</span><span class="p">,</span> <span class="mi">1</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>        <span class="p">)</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>        <span class="n">targetBands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">targetBand</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;targetBands&quot;</span><span class="p">,</span> <span class="n">targetBands</span><span class="p">)</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>        <span class="n">product_masked</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;BandMaths&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">water_mask</span><span class="p">)</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Masking permanent water complete.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>        <span class="k">return</span> <span class="n">product_masked</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Terrain correction failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.plotBand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plotBand</span><span class="p">(</span><span class="n">product1</span><span class="p">,</span> <span class="n">band_name1</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span></code>

<a href="#pysarflow.grd.plotBand" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Plots one or two SNAP Product bands side by side.
Axes ticks are shown, and each subplot has its own title.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product1</code></b>
              –
              <div class="doc-md-description">
                <p>First SNAP Product.</p>
              </div>
            </li>
            <li>
              <b><code>band_name1</code></b>
              –
              <div class="doc-md-description">
                <p>Band name for first product.</p>
              </div>
            </li>
            <li>
              <b><code>product2</code></b>
              –
              <div class="doc-md-description">
                <p>Optional second SNAP Product.</p>
              </div>
            </li>
            <li>
              <b><code>band_name2</code></b>
              –
              <div class="doc-md-description">
                <p>Band name for second product.</p>
              </div>
            </li>
            <li>
              <b><code>vmin,</code></b>
                  (<code><span title="vmax">vmax</span></code>)
              –
              <div class="doc-md-description">
                <p>Colormap limits.</p>
              </div>
            </li>
            <li>
              <b><code>cmap</code></b>
              –
              <div class="doc-md-description">
                <p>Colormap.</p>
              </div>
            </li>
            <li>
              <b><code>figsize</code></b>
              –
              <div class="doc-md-description">
                <p>Figure size.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>list of matplotlib.image.AxesImage: The image plot objects.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="k">def</span><span class="w"> </span><span class="nf">plotBand</span><span class="p">(</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>    <span class="n">product1</span><span class="p">,</span> <span class="n">band_name1</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="p">):</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">    Plots one or two SNAP Product bands side by side.</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="sd">    Axes ticks are shown, and each subplot has its own title.</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">        product1: First SNAP Product.</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a><span class="sd">        band_name1: Band name for first product.</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">        product2: Optional second SNAP Product.</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">        band_name2: Band name for second product.</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">        vmin, vmax: Colormap limits.</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">        cmap: Colormap.</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a><span class="sd">        figsize: Figure size.</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="sd">        list of matplotlib.image.AxesImage: The image plot objects.</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_band_data</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">band_name</span><span class="p">):</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>        <span class="n">band</span> <span class="o">=</span> <span class="n">product</span><span class="o">.</span><span class="n">getBand</span><span class="p">(</span><span class="n">band_name</span><span class="p">)</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Band &#39;</span><span class="si">{</span><span class="n">band_name</span><span class="si">}</span><span class="s2">&#39; not found in product.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">getRasterWidth</span><span class="p">(),</span> <span class="n">band</span><span class="o">.</span><span class="n">getRasterHeight</span><span class="p">()</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">w</span> <span class="o">*</span> <span class="n">h</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a>        <span class="n">band</span><span class="o">.</span><span class="n">readPixels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>        <span class="n">data</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a>        <span class="k">return</span> <span class="n">data</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a>    <span class="n">data1</span> <span class="o">=</span> <span class="n">get_band_data</span><span class="p">(</span><span class="n">product1</span><span class="p">,</span> <span class="n">band_name1</span><span class="p">)</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>    <span class="n">img1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">()</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">()</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Band: </span><span class="si">{</span><span class="n">band_name1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">img1</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.preprocess_grd_product" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">preprocess_grd_product</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span></code>

<a href="#pysarflow.grd.preprocess_grd_product" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Preprocess a Sentinel-1 GRD product using a given configuration.</p>
<p>The function performs a series of preprocessing steps including AOI subsetting,
orbit file application, thermal and border noise removal, radiometric calibration,
speckle filtering, and terrain correction.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>file_path</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>Path to the Sentinel-1 GRD product file.</p>
              </div>
            </li>
            <li>
              <b><code>config</code></b>
                  (<code><span title="dict">dict</span></code>)
              –
              <div class="doc-md-description">
                <p>Configuration dictionary containing preprocessing parameters, such as:
- aoi_bbox (list): Bounding box [minLon, minLat, maxLon, maxLat].
- polarization (str, optional): Polarization to calibrate,
  e.g., "VV" or "VH". Defaults to "VV".
- pols_selected (list, optional): List of polarizations to include. Defaults to None.
- speckle_filter (str, optional): Speckle filter type. Defaults to "Lee".
- filterSizeX (int or str, optional): Filter kernel size in X direction. Defaults to 5.
- filterSizeY (int or str, optional): Filter kernel size in Y direction. Defaults to 5.
- demName (str, optional): DEM name for terrain correction. Defaults to "SRTM 3Sec".
- pixelSpacingInMeter (float or str, optional): Pixel spacing for terrain correction.
  Defaults to 10.0.
- demResamplingMethod (str, optional): Resampling method for DEM.
  Defaults to "BILINEAR_INTERPOLATION".
- imgResamplingMethod (str, optional): Resampling method for image.
  Defaults to "BILINEAR_INTERPOLATION".</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: Preprocessed Sentinel-1 product.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="RuntimeError">RuntimeError</span></code>
              –
              <div class="doc-md-description">
                <p>If any step of the preprocessing fails.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-601" name="__codelineno-0-601"></a><span class="k">def</span><span class="w"> </span><span class="nf">preprocess_grd_product</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a><span class="sd">    Preprocess a Sentinel-1 GRD product using a given configuration.</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a><span class="sd">    The function performs a series of preprocessing steps including AOI subsetting,</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a><span class="sd">    orbit file application, thermal and border noise removal, radiometric calibration,</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a><span class="sd">    speckle filtering, and terrain correction.</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a><span class="sd">        file_path (str): Path to the Sentinel-1 GRD product file.</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a><span class="sd">        config (dict): Configuration dictionary containing preprocessing parameters, such as:</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a><span class="sd">            - aoi_bbox (list): Bounding box [minLon, minLat, maxLon, maxLat].</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="sd">            - polarization (str, optional): Polarization to calibrate,</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">              e.g., &quot;VV&quot; or &quot;VH&quot;. Defaults to &quot;VV&quot;.</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a><span class="sd">            - pols_selected (list, optional): List of polarizations to include. Defaults to None.</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">            - speckle_filter (str, optional): Speckle filter type. Defaults to &quot;Lee&quot;.</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">            - filterSizeX (int or str, optional): Filter kernel size in X direction. Defaults to 5.</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">            - filterSizeY (int or str, optional): Filter kernel size in Y direction. Defaults to 5.</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">            - demName (str, optional): DEM name for terrain correction. Defaults to &quot;SRTM 3Sec&quot;.</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">            - pixelSpacingInMeter (float or str, optional): Pixel spacing for terrain correction.</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">              Defaults to 10.0.</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">            - demResamplingMethod (str, optional): Resampling method for DEM.</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">              Defaults to &quot;BILINEAR_INTERPOLATION&quot;.</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="sd">            - imgResamplingMethod (str, optional): Resampling method for image.</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a><span class="sd">              Defaults to &quot;BILINEAR_INTERPOLATION&quot;.</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a><span class="sd">        esa_snappy.Product: Preprocessed Sentinel-1 product.</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a><span class="sd">        RuntimeError: If any step of the preprocessing fails.</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>        <span class="n">aoi_bbox</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;aoi_bbox&quot;</span><span class="p">]</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>        <span class="n">polarization</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;polarization&quot;</span><span class="p">,</span> <span class="s2">&quot;VV&quot;</span><span class="p">)</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>        <span class="n">pols_selected</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pols_selected&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>        <span class="nb">filter</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speckle_filter&quot;</span><span class="p">,</span> <span class="s2">&quot;Lee&quot;</span><span class="p">)</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>        <span class="n">filterSizeX</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;filterSizeX&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">)</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>        <span class="n">filterSizeY</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;filterSizeY&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">)</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>        <span class="n">demName</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;demName&quot;</span><span class="p">,</span> <span class="s2">&quot;SRTM 3Sec&quot;</span><span class="p">)</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>        <span class="n">pixelSpacingInMeter</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pixelSpacingInMeter&quot;</span><span class="p">,</span> <span class="s2">&quot;10.0&quot;</span><span class="p">)</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>        <span class="n">demResamplingMethod</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>            <span class="s2">&quot;demResamplingMethod&quot;</span><span class="p">,</span> <span class="s2">&quot;BILINEAR_INTERPOLATION&quot;</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>        <span class="p">)</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a>        <span class="n">imgResamplingMethod</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a>            <span class="s2">&quot;imgResamplingMethod&quot;</span><span class="p">,</span> <span class="s2">&quot;BILINEAR_INTERPOLATION&quot;</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a>        <span class="p">)</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a>        <span class="n">product</span> <span class="o">=</span> <span class="n">read_grd_product</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>        <span class="c1"># 1. Subset AOI (optional)</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a>        <span class="k">if</span> <span class="n">aoi_bbox</span><span class="p">:</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a>            <span class="n">product</span> <span class="o">=</span> <span class="n">subset_AOI</span><span class="p">(</span><span class="n">product</span><span class="o">=</span><span class="n">product</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;aoi_bbox&quot;</span><span class="p">])</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a>        <span class="c1"># 2. Apply corrections</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>        <span class="n">product</span> <span class="o">=</span> <span class="n">apply_orbit_file</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>        <span class="n">product</span> <span class="o">=</span> <span class="n">thermal_noise_removal</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>        <span class="n">product</span> <span class="o">=</span> <span class="n">border_noise_removal</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>        <span class="c1"># 3. Radiometric Calibration</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>        <span class="n">product</span> <span class="o">=</span> <span class="n">radiometric_calibration</span><span class="p">(</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>            <span class="n">product</span><span class="p">,</span> <span class="n">polarization</span><span class="o">=</span><span class="n">polarization</span><span class="p">,</span> <span class="n">pols_selected</span><span class="o">=</span><span class="n">pols_selected</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>        <span class="p">)</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>        <span class="c1"># 4. Speckle Filter</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>        <span class="n">product</span> <span class="o">=</span> <span class="n">speckle_filter</span><span class="p">(</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>            <span class="n">product</span><span class="p">,</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>            <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>            <span class="n">filterSizeX</span><span class="o">=</span><span class="n">filterSizeX</span><span class="p">,</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>            <span class="n">filterSizeY</span><span class="o">=</span><span class="n">filterSizeY</span><span class="p">,</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>        <span class="p">)</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>        <span class="c1"># 5. Terrain Correction</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>        <span class="n">product</span> <span class="o">=</span> <span class="n">terrain_correction</span><span class="p">(</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>            <span class="n">product</span><span class="p">,</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>            <span class="n">demName</span><span class="o">=</span><span class="n">demName</span><span class="p">,</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>            <span class="n">pixelSpacingInMeter</span><span class="o">=</span><span class="n">pixelSpacingInMeter</span><span class="p">,</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>            <span class="n">demResamplingMethod</span><span class="o">=</span><span class="n">demResamplingMethod</span><span class="p">,</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a>            <span class="n">imgResamplingMethod</span><span class="o">=</span><span class="n">imgResamplingMethod</span><span class="p">,</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>        <span class="p">)</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a>        <span class="k">return</span> <span class="n">product</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Terrain correction failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.radiometric_calibration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">radiometric_calibration</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">polarization</span><span class="p">,</span> <span class="n">pols_selected</span><span class="p">)</span></code>

<a href="#pysarflow.grd.radiometric_calibration" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Perform radiometric calibration on the SAR product.</p>
<p>Calibration converts the raw SAR data into radar brightness values.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>The input SAR Product object.</p>
              </div>
            </li>
            <li>
              <b><code>polarization</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>the desired output polarization type.</p>
              </div>
            </li>
            <li>
              <b><code>pols_selected</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>the polarizations to be calibrated</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: The radiometrically calibrated SAR Product object.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="ValueError">ValueError</span></code>
              –
              <div class="doc-md-description">
                <p>If an unsupported 'polarization' type is provided.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="k">def</span><span class="w"> </span><span class="nf">radiometric_calibration</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">polarization</span><span class="p">,</span> <span class="n">pols_selected</span><span class="p">):</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="sd">    Perform radiometric calibration on the SAR product.</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="sd">    Calibration converts the raw SAR data into radar brightness values.</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="sd">        product (esa_snappy.Product): The input SAR Product object.</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="sd">        polarization (str): the desired output polarization type.</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="sd">        pols_selected (str): the polarizations to be calibrated</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">        esa_snappy.Product: The radiometrically calibrated SAR Product object.</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">        ValueError: If an unsupported &#39;polarization&#39; type is provided.</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Radiometric calibration for polarization(s): </span><span class="si">{</span><span class="n">pols_selected</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;outputSigmaBand&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;outputImageScaleInDb&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># Output linear scale, not dB</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>    <span class="c1"># Determine source bands based on the input polarization type</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>    <span class="k">if</span> <span class="n">polarization</span> <span class="o">==</span> <span class="s2">&quot;DH&quot;</span><span class="p">:</span>  <span class="c1"># Dual-horizontal: HH, HV</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;sourceBands&quot;</span><span class="p">,</span> <span class="s2">&quot;Intensity_HH,Intensity_HV&quot;</span><span class="p">)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>    <span class="k">elif</span> <span class="n">polarization</span> <span class="o">==</span> <span class="s2">&quot;DV&quot;</span><span class="p">:</span>  <span class="c1"># Dual-vertical: VH, VV</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;sourceBands&quot;</span><span class="p">,</span> <span class="s2">&quot;Intensity_VH,Intensity_VV&quot;</span><span class="p">)</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>    <span class="k">elif</span> <span class="n">polarization</span> <span class="o">==</span> <span class="s2">&quot;SH&quot;</span> <span class="ow">or</span> <span class="n">polarization</span> <span class="o">==</span> <span class="s2">&quot;HH&quot;</span><span class="p">:</span>  <span class="c1"># Single-horizontal: HH</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;sourceBands&quot;</span><span class="p">,</span> <span class="s2">&quot;Intensity_HH&quot;</span><span class="p">)</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>    <span class="k">elif</span> <span class="n">polarization</span> <span class="o">==</span> <span class="s2">&quot;SV&quot;</span> <span class="ow">or</span> <span class="n">polarization</span> <span class="o">==</span> <span class="s2">&quot;VV&quot;</span><span class="p">:</span>  <span class="c1"># Single-vertical: VV</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;sourceBands&quot;</span><span class="p">,</span> <span class="s2">&quot;Intensity_VV&quot;</span><span class="p">)</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>            <span class="sa">f</span><span class="s2">&quot;Unsupported polarization type: </span><span class="si">{</span><span class="n">polarization</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>            <span class="s2">&quot;Please use &#39;DH&#39;, &#39;DV&#39;, &#39;SH&#39;/&#39;HH&#39;, or &#39;SV&#39;/&#39;VV&#39;.&quot;</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span class="p">)</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>    <span class="c1"># This parameter directly controls which output bands are generated</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;selectedPolarisations&quot;</span><span class="p">,</span> <span class="n">pols_selected</span><span class="p">)</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Calibration&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Radiometric calibration completed.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.read_grd_product" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_grd_product</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>

<a href="#pysarflow.grd.read_grd_product" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Read a Sentinel-1 SAR GRD product from a .SAFE directory or a .zip archive.</p>
<p>This function utilizes ESA SNAP's <code>ProductIO.readProduct</code> to load the SAR data
into a SNAP Product object, which is the base object for further processing.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>file_path</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>The file path to the Sentinel-1 .SAFE directory (unzipped)
            or the .zip archive containing the GRD product.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: A SNAP Product object representing the loaded SAR data.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="FileNotFoundError">FileNotFoundError</span></code>
              –
              <div class="doc-md-description">
                <p>If the specified zip_path does not exist.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="k">def</span><span class="w"> </span><span class="nf">read_grd_product</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">    Read a Sentinel-1 SAR GRD product from a .SAFE directory or a .zip archive.</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    This function utilizes ESA SNAP&#39;s `ProductIO.readProduct` to load the SAR data</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    into a SNAP Product object, which is the base object for further processing.</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">        file_path (str): The file path to the Sentinel-1 .SAFE directory (unzipped)</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">                        or the .zip archive containing the GRD product.</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">        esa_snappy.Product: A SNAP Product object representing the loaded SAR data.</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">        FileNotFoundError: If the specified zip_path does not exist.</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Product path not found: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reading SAR product from: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="n">product</span> <span class="o">=</span> <span class="n">ProductIO</span><span class="o">.</span><span class="n">readProduct</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Product read successfully.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="k">return</span> <span class="n">product</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.speckle_filter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">speckle_filter</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">filterSizeY</span><span class="o">=</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="n">filterSizeX</span><span class="o">=</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;Lee&#39;</span><span class="p">)</span></code>

<a href="#pysarflow.grd.speckle_filter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Apply speckle filtering to a SAR product using the specified filter parameters.</p>
<p>This function uses the Sentinel-1 toolbox's Speckle-Filter operator via GPF
(Graph Processing Framework) to reduce speckle noise in SAR imagery.</p>
<h4 id="pysarflow.grd.speckle_filter--parameters">Parameters:<a class="headerlink" href="#pysarflow.grd.speckle_filter--parameters" title="Permanent link">&para;</a></h4>
<p>product : Product
    The input SAR product to be filtered.</p>


<details class="filtersizey-" open>
  <summary>str, optional</summary>
  <p>Filter size in the Y direction (default is '5').</p>
</details>

<details class="filtersizex-" open>
  <summary>str, optional</summary>
  <p>Filter size in the X direction (default is '5').</p>
</details>

<details class="filter-" open>
  <summary>str, optional</summary>
  <p>Type of speckle filter to apply. Common options include "Lee", "Refined Lee", etc.
Default is "Lee".</p>
</details>        <h4 id="pysarflow.grd.speckle_filter--returns">Returns:<a class="headerlink" href="#pysarflow.grd.speckle_filter--returns" title="Permanent link">&para;</a></h4>
<p>Product
    The filtered SAR product after applying the speckle filter.</p>


            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="k">def</span><span class="w"> </span><span class="nf">speckle_filter</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">filterSizeY</span><span class="o">=</span><span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="n">filterSizeX</span><span class="o">=</span><span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;Lee&quot;</span><span class="p">):</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply speckle filtering to a SAR product using the specified filter parameters.</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">    This function uses the Sentinel-1 toolbox&#39;s Speckle-Filter operator via GPF</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">    (Graph Processing Framework) to reduce speckle noise in SAR imagery.</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="sd">    Parameters:</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">    -----------</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">    product : Product</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">        The input SAR product to be filtered.</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">    filterSizeY : str, optional</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="sd">        Filter size in the Y direction (default is &#39;5&#39;).</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">    filterSizeX : str, optional</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">        Filter size in the X direction (default is &#39;5&#39;).</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">    filter : str, optional</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">        Type of speckle filter to apply. Common options include &quot;Lee&quot;, &quot;Refined Lee&quot;, etc.</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">        Default is &quot;Lee&quot;.</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">    --------</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="sd">    Product</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">        The filtered SAR product after applying the speckle filter.</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>    <span class="n">band_name</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">getBandNames</span><span class="p">())</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;sourceBands&quot;</span><span class="p">,</span> <span class="n">band_name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;filter&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;filterSizeX&quot;</span><span class="p">,</span> <span class="n">filterSizeX</span><span class="p">)</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;filterSizeY&quot;</span><span class="p">,</span> <span class="n">filterSizeY</span><span class="p">)</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;dampingFactor&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">)</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;estimateENL&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;enl&quot;</span><span class="p">,</span> <span class="s2">&quot;1.0&quot;</span><span class="p">)</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;numLooksStr&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;targetWindowSizeStr&quot;</span><span class="p">,</span> <span class="s2">&quot;3x3&quot;</span><span class="p">)</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;sigmaStr&quot;</span><span class="p">,</span> <span class="s2">&quot;0.9&quot;</span><span class="p">)</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;anSize&quot;</span><span class="p">,</span> <span class="s2">&quot;50&quot;</span><span class="p">)</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>    <span class="n">speckle_filter_output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Speckle-Filter&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>    <span class="n">width</span> <span class="o">=</span> <span class="n">speckle_filter_output</span><span class="o">.</span><span class="n">getSceneRasterWidth</span><span class="p">()</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>    <span class="n">height</span> <span class="o">=</span> <span class="n">speckle_filter_output</span><span class="o">.</span><span class="n">getSceneRasterHeight</span><span class="p">()</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Columns (width):&quot;</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Rows (height):&quot;</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Speckle filter completed.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>    <span class="k">return</span> <span class="n">speckle_filter_output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.stack" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stack</span><span class="p">(</span><span class="n">master_product</span><span class="p">,</span> <span class="n">slave_product</span><span class="p">)</span></code>

<a href="#pysarflow.grd.stack" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Collocates two SAR products (master and slave) into a single stacked product.</p>
<p>This creates a new product where the bands from the master and slave products
are aligned spatially. Optionally, the master and slave components can be renamed
to avoid conflicts.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>master_product</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>The reference SAR product.</p>
              </div>
            </li>
            <li>
              <b><code>slave_product</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>The secondary SAR product to</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: A new product containing collocated bands from both master and slave products.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="RuntimeError">RuntimeError</span></code>
              –
              <div class="doc-md-description">
                <p>If the Collocate operation fails.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-437" name="__codelineno-0-437"></a><span class="k">def</span><span class="w"> </span><span class="nf">stack</span><span class="p">(</span><span class="n">master_product</span><span class="p">,</span> <span class="n">slave_product</span><span class="p">):</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a><span class="sd">    Collocates two SAR products (master and slave) into a single stacked product.</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a><span class="sd">    This creates a new product where the bands from the master and slave products</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a><span class="sd">    are aligned spatially. Optionally, the master and slave components can be renamed</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a><span class="sd">    to avoid conflicts.</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a><span class="sd">        master_product (esa_snappy.Product): The reference SAR product.</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><span class="sd">        slave_product (esa_snappy.Product): The secondary SAR product to</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><span class="sd">        be collocated with the master.</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a><span class="sd">        esa_snappy.Product: A new product containing collocated bands from both master and slave products.</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="sd">        RuntimeError: If the Collocate operation fails.</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;targetProductType&quot;</span><span class="p">,</span> <span class="s2">&quot;Collocated&quot;</span><span class="p">)</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;resamplingType&quot;</span><span class="p">,</span> <span class="s2">&quot;NEAREST_NEIGHBOUR&quot;</span><span class="p">)</span>  <span class="c1"># or &#39;Bilinear&#39;, &#39;Bicubic&#39;</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;renameMasterComponents&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;renameSlaveComponents&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>    <span class="n">stacked</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>        <span class="s2">&quot;Collocate&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="p">[</span><span class="n">master_product</span><span class="p">,</span> <span class="n">slave_product</span><span class="p">]</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>    <span class="p">)</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>    <span class="k">return</span> <span class="n">stacked</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.subset_AOI" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">subset_AOI</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[],</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#pysarflow.grd.subset_AOI" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Subset the product to a specific AOI to reduce resource usage for large images.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>Input SAR product.</p>
              </div>
            </li>
            <li>
              <b><code>bbox</code></b>
                  (<code><span title="list">list</span></code>, default:
                      <code>[]</code>
)
              –
              <div class="doc-md-description">
                <p>Bounding box as [minLon, minLat, maxLon, maxLat].</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: Subsetted product.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="ValueError">ValueError</span></code>
              –
              <div class="doc-md-description">
                <p>If bbox is None or invalid.</p>
              </div>
            </li>
            <li>
                  <code><span title="Exception">Exception</span></code>
              –
              <div class="doc-md-description">
                <p>If both bbox or file_path is not passed</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="k">def</span><span class="w"> </span><span class="nf">subset_AOI</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[],</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">    Subset the product to a specific AOI to reduce resource usage for large images.</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        product (esa_snappy.Product): Input SAR product.</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        bbox (list): Bounding box as [minLon, minLat, maxLon, maxLat].</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">        esa_snappy.Product: Subsetted product.</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">        ValueError: If bbox is None or invalid.</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">        Exception: If both bbox or file_path is not passed</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="k">if</span> <span class="n">bbox</span><span class="p">:</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;bbox must be a list of [minLon, minLat, maxLon, maxLat]&quot;</span><span class="p">)</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="n">geometry_wkt</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>            <span class="sa">f</span><span class="s2">&quot;POLYGON((</span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">, &quot;</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">))&quot;</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>        <span class="p">)</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="k">elif</span> <span class="n">file_path</span><span class="p">:</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span class="n">geometry_wkt</span> <span class="o">=</span> <span class="n">extract_bbox</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Either bbox or file_path should be provided&quot;</span><span class="p">)</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Subsetting using bounding box:&quot;</span><span class="p">,</span> <span class="n">bbox</span><span class="p">)</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="n">geometry</span> <span class="o">=</span> <span class="n">WKTReader</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">geometry_wkt</span><span class="p">)</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>    <span class="n">HashMap</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;java.util.HashMap&quot;</span><span class="p">)</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="n">GPF</span><span class="o">.</span><span class="n">getDefaultInstance</span><span class="p">()</span><span class="o">.</span><span class="n">getOperatorSpiRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">loadOperatorSpis</span><span class="p">()</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;copyMetadata&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;geoRegion&quot;</span><span class="p">,</span> <span class="n">geometry</span><span class="p">)</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Subset&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="n">width</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">getSceneRasterWidth</span><span class="p">()</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="n">height</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">getSceneRasterHeight</span><span class="p">()</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Columns (width):&quot;</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Rows (height):&quot;</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Product subsetted.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.terrain_correction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">terrain_correction</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">demName</span><span class="o">=</span><span class="s1">&#39;SRTM 3Sec&#39;</span><span class="p">,</span> <span class="n">pixelSpacingInMeter</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">demResamplingMethod</span><span class="o">=</span><span class="s1">&#39;BILINEAR_INTERPOLATION&#39;</span><span class="p">,</span> <span class="n">imgResamplingMethod</span><span class="o">=</span><span class="s1">&#39;BILINEAR_INTERPOLATION&#39;</span><span class="p">)</span></code>

<a href="#pysarflow.grd.terrain_correction" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Performs terrain correction on a SAR product using a specified DEM.
This step corrects geometric distortions caused by the side-looking
geometry of SAR sensors and normalizes pixel spacing.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
              –
              <div class="doc-md-description">
                <p>Product
Input SAR product.</p>
              </div>
            </li>
            <li>
              <b><code>demName</code></b>
              –
              <div class="doc-md-description">
                <p>str, optional
DEM source to use (e.g., 'SRTM 3Sec', 'Copernicus 30m').</p>
              </div>
            </li>
            <li>
              <b><code>pixelSpacingInMeter</code></b>
              –
              <div class="doc-md-description">
                <p>float, optional
Output pixel spacing in meters. Default is 10.0.</p>
              </div>
            </li>
            <li>
              <b><code>demResamplingMethod</code></b>
              –
              <div class="doc-md-description">
                <p>str, optional
Resampling method for DEM
(e.g., 'NEAREST_NEIGHBOUR', 'BILINEAR_INTERPOLATION', 'CUBIC_CONVOLUTION').</p>
              </div>
            </li>
            <li>
              <b><code>imgResamplingMethod</code></b>
              –
              <div class="doc-md-description">
                <p>str, optional
Resampling method for image bands
(e.g., 'NEAREST_NEIGHBOUR', 'BILINEAR_INTERPOLATION', 'CUBIC_CONVOLUTION').</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: Terrain-corrected product.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="RuntimeError">RuntimeError</span></code>
              –
              <div class="doc-md-description">
                <p>If terrain correction fails during processing.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="k">def</span><span class="w"> </span><span class="nf">terrain_correction</span><span class="p">(</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>    <span class="n">product</span><span class="p">,</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>    <span class="n">demName</span><span class="o">=</span><span class="s2">&quot;SRTM 3Sec&quot;</span><span class="p">,</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>    <span class="n">pixelSpacingInMeter</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>    <span class="n">demResamplingMethod</span><span class="o">=</span><span class="s2">&quot;BILINEAR_INTERPOLATION&quot;</span><span class="p">,</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>    <span class="n">imgResamplingMethod</span><span class="o">=</span><span class="s2">&quot;BILINEAR_INTERPOLATION&quot;</span><span class="p">,</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="p">):</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a><span class="sd">    Performs terrain correction on a SAR product using a specified DEM.</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="sd">    This step corrects geometric distortions caused by the side-looking</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="sd">    geometry of SAR sensors and normalizes pixel spacing.</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">        product : Product</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">            Input SAR product.</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">        demName : str, optional</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a><span class="sd">            DEM source to use (e.g., &#39;SRTM 3Sec&#39;, &#39;Copernicus 30m&#39;).</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="sd">        pixelSpacingInMeter : float, optional</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><span class="sd">            Output pixel spacing in meters. Default is 10.0.</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="sd">        demResamplingMethod : str, optional</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><span class="sd">            Resampling method for DEM</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="sd">            (e.g., &#39;NEAREST_NEIGHBOUR&#39;, &#39;BILINEAR_INTERPOLATION&#39;, &#39;CUBIC_CONVOLUTION&#39;).</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="sd">        imgResamplingMethod : str, optional</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="sd">            Resampling method for image bands</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">            (e.g., &#39;NEAREST_NEIGHBOUR&#39;, &#39;BILINEAR_INTERPOLATION&#39;, &#39;CUBIC_CONVOLUTION&#39;).</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="sd">        esa_snappy.Product: Terrain-corrected product.</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">        RuntimeError: If terrain correction fails during processing.</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>        <span class="n">band_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">getBandNames</span><span class="p">())</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;demName&quot;</span><span class="p">,</span> <span class="n">demName</span><span class="p">)</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;nodataValueAtSea&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;sourceBands&quot;</span><span class="p">,</span> <span class="n">band_names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;saveDem&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># Avoid saving DEM band</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;saveLatLon&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>            <span class="s2">&quot;imgResamplingMethod&quot;</span><span class="p">,</span> <span class="n">imgResamplingMethod</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a>        <span class="p">)</span>  <span class="c1"># Ensure smooth interpolation</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>            <span class="s2">&quot;pixelSpacingInMeter&quot;</span><span class="p">,</span> <span class="n">pixelSpacingInMeter</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>        <span class="p">)</span>  <span class="c1"># Ensure smooth interpolation</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>            <span class="s2">&quot;demResamplingMethod&quot;</span><span class="p">,</span> <span class="n">demResamplingMethod</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>        <span class="p">)</span>  <span class="c1"># Ensure smooth interpolation</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;noDataValue&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">9999.0</span><span class="p">)</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>        <span class="n">tc_output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Terrain-Correction&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>        <span class="n">tc_output</span> <span class="o">=</span> <span class="n">convert_0_to_nan</span><span class="p">(</span><span class="n">tc_output</span><span class="p">)</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>        <span class="c1"># width  = tc_output.getSceneRasterWidth()</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>        <span class="c1"># height = tc_output.getSceneRasterHeight()</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>        <span class="c1"># print(&quot;Columns (width):&quot;, width)</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>        <span class="c1"># print(&quot;Rows (height):&quot;, height)</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Terrain correction completed.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>        <span class="k">return</span> <span class="n">tc_output</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Terrain correction failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.grd.thermal_noise_removal" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">thermal_noise_removal</span><span class="p">(</span><span class="n">product</span><span class="p">)</span></code>

<a href="#pysarflow.grd.thermal_noise_removal" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Remove thermal noise from the SAR product.</p>
<p>Thermal noise is a constant noise floor that affects SAR images, especially
in low-backscatter areas. This step removes this noise, improving the signal-to-noise ratio.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>The input SAR Product object.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: The product after thermal noise removal.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/grd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="k">def</span><span class="w"> </span><span class="nf">thermal_noise_removal</span><span class="p">(</span><span class="n">product</span><span class="p">):</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">    Remove thermal noise from the SAR product.</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">    Thermal noise is a constant noise floor that affects SAR images, especially</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">    in low-backscatter areas. This step removes this noise, improving the signal-to-noise ratio.</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">        product (esa_snappy.Product): The input SAR Product object.</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">        esa_snappy.Product: The product after thermal noise removal.</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Performing thermal noise removal...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;removeThermalNoise&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;ThermalNoiseRemoval&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Thermal noise removed.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pysarflow.slc"></a>
    <div class="doc doc-contents first">

        <p>Preprocessing Sentinel1 SLC Data</p>
<p>This Python script enables users to perform essential preprocessing steps
on Sentinel-1 SLC data, including thermal noise removal, radiometric calibration,
and terrain correction.</p>
<p>It accepts Sentinel-1 products in the .SAFE format.</p>
<p>The script depends on the 'esa_snappy' library, which must be installed
in the Python environment where this script is executed.</p>


<details class="this-file-can-also-be-imported-as-a-module-and-contains-the-following-functions" open>
  <summary>This file can also be imported as a module and contains the following functions</summary>
  <p>Major:
    * read_slc_product
Supporting:
    *</p>
</details>








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.apply_orbit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_orbit</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">orbit_type</span><span class="o">=</span><span class="s1">&#39;Sentinel Precise (Auto Download)&#39;</span><span class="p">)</span></code>

<a href="#pysarflow.slc.apply_orbit" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Run SNAP 'Apply-Orbit-File' on a Product.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
              –
              <div class="doc-md-description">
                <p>Input product to process. Ouput of TOPSAR-split</p>
              </div>
            </li>
            <li>
              <b><code>orbit_type</code></b>
              –
              <div class="doc-md-description">
                <p>The orbit source/type to use. Common values include:
  - <code>"Sentinel Precise (Auto Download)"</code> – preferred.
  - <code>"Sentinel Restituted (Auto Download)"</code> – fallback if precise is not yet available.
  - <code>"DORIS Precise VOR (ENVISAT)"</code> – for other missions.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>Product</code></b>              –
              <div class="doc-md-description">
                <p>A new SNAP <code>Product</code> with orbits applied.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="k">def</span><span class="w"> </span><span class="nf">apply_orbit</span><span class="p">(</span><span class="n">product</span><span class="p">,</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>                <span class="n">orbit_type</span><span class="o">=</span><span class="s2">&quot;Sentinel Precise (Auto Download)&quot;</span><span class="p">):</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">    Run SNAP &#39;Apply-Orbit-File&#39; on a Product.</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">        product:</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">            Input product to process. Ouput of TOPSAR-split</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">        orbit_type:</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="sd">            The orbit source/type to use. Common values include:</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">              - `&quot;Sentinel Precise (Auto Download)&quot;` – preferred.</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="sd">              - `&quot;Sentinel Restituted (Auto Download)&quot;` – fallback if precise is not yet available.</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="sd">              - `&quot;DORIS Precise VOR (ENVISAT)&quot;` – for other missions.</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="sd">        Product: A new SNAP `Product` with orbits applied.</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span class="n">Boolean</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s1">&#39;java.lang.Boolean&#39;</span><span class="p">)</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="n">Integer</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s1">&#39;java.lang.Integer&#39;</span><span class="p">)</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;orbitType&quot;</span><span class="p">,</span> <span class="n">orbit_type</span><span class="p">)</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;polyDegree&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;continueOnFail&quot;</span><span class="p">,</span> <span class="n">Boolean</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>    <span class="n">out</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Apply-Orbit-File&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Apply-Orbit-File: </span><span class="si">{</span><span class="n">orbit_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.back_geocoding" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">back_geocoding</span><span class="p">(</span><span class="n">products</span><span class="p">,</span> <span class="n">dem_name</span><span class="o">=</span><span class="s1">&#39;SRTM 1Sec HGT&#39;</span><span class="p">,</span> <span class="n">ext_dem</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#pysarflow.slc.back_geocoding" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Run SNAP Back-Geocoding on master + slave(s).</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>master</code></b>
                  (<code>  </code>)
              –
              <div class="doc-md-description">
                <p>SNAP Product (Apply-Orbit-File already done). Output of the apply orbit</p>
              </div>
            </li>
            <li>
              <b><code>slaves</code></b>
                  (<code>  </code>)
              –
              <div class="doc-md-description">
                <p>list of SNAP Products (Apply-Orbit-File already done). Output of the apply orbit </p>
              </div>
            </li>
            <li>
              <b><code>dem_name</code></b>
              –
              <div class="doc-md-description">
                <p>name of DEM in SNAP auxdata (default SRTM 1Sec HGT)</p>
              </div>
            </li>
            <li>
              <b><code>ext_dem</code></b>
                  (<code> </code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>optional external DEM product</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>SNAP Product with master + co-registered slave or slaves</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="k">def</span><span class="w"> </span><span class="nf">back_geocoding</span><span class="p">(</span><span class="n">products</span><span class="p">,</span> <span class="n">dem_name</span><span class="o">=</span><span class="s2">&quot;SRTM 1Sec HGT&quot;</span><span class="p">,</span> <span class="n">ext_dem</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="sd">    Run SNAP Back-Geocoding on master + slave(s).</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="sd">        master   : SNAP Product (Apply-Orbit-File already done). Output of the apply orbit</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">        slaves   : list of SNAP Products (Apply-Orbit-File already done). Output of the apply orbit </span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">        dem_name : name of DEM in SNAP auxdata (default SRTM 1Sec HGT)</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">        ext_dem  : optional external DEM product</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><span class="sd">        SNAP Product with master + co-registered slave or slaves</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running Back-Geocoding...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;demName&quot;</span><span class="p">,</span> <span class="n">dem_name</span><span class="p">)</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;demResamplingMethod&quot;</span><span class="p">,</span> <span class="s2">&quot;BILINEAR_INTERPOLATION&quot;</span><span class="p">)</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;resamplingType&quot;</span><span class="p">,</span> <span class="s2">&quot;BILINEAR_INTERPOLATION&quot;</span><span class="p">)</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;maskOutAreaWithoutElevation&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;outputDerampDemodPhase&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;disableReramp&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>    <span class="k">if</span> <span class="n">ext_dem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;externalDEMFile&quot;</span><span class="p">,</span> <span class="n">ext_dem</span><span class="p">)</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Back-Geocoding&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">products</span><span class="p">)</span> 
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Back geocoding applied!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.burst_for_geometry" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">burst_for_geometry</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">safe_dir</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">subswath</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#pysarflow.slc.burst_for_geometry" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Determine TOPS burst index (or range) for a geometry in a Sentinel-1 IW SLC.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code>  </code>)
              –
              <div class="doc-md-description">
                <p>Input SAR product.</p>
              </div>
            </li>
            <li>
              <b><code>safe_dir</code></b>
                  (<code> </code>)
              –
              <div class="doc-md-description">
                <p>path to the *.SAFE folder (str or Path)</p>
              </div>
            </li>
            <li>
              <b><code>geom</code></b>
                  (<code>     </code>)
              –
              <div class="doc-md-description">
                <p>Shapely Point/Polygon, or WKT string, or bbox tuple (minlon,minlat,maxlon,maxlat)</p>
              </div>
            </li>
            <li>
              <b><code>subswath</code></b>
                  (<code> </code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>optional 'IW1'|'IW2'|'IW3' to force a swath</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>        <p>Returns (dict):
  {
    'swath': 'IW1'|'IW2'|'IW3',
    'band_name': 'Intensity_IW1_VV',   # band used
    'linesPerBurst': 1495,
    'numberOfBursts': 10,
    'burst': 5,              # for Point
    'firstBurst': 4,         # for Polygon
    'lastBurst': 6,          # for Polygon
    'geom_type': 'Point'|'Polygon'
  }</p>
<p>Raises:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">ValueError</span>:<span class="w"> </span>
<span class="o">-</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">geom</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">Shapely</span><span class="w"> </span><span class="nv">Point</span><span class="o">/</span><span class="nv">Polygon</span>,<span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">WKT</span><span class="w"> </span><span class="nv">string</span>,<span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="mi">4</span><span class="o">-</span><span class="nv">element</span><span class="w"> </span><span class="nv">bbox</span><span class="w"> </span>``<span class="ss">(</span><span class="nv">minx</span>,<span class="w"> </span><span class="nv">miny</span>,<span class="w"> </span><span class="nv">maxx</span>,<span class="w"> </span><span class="nv">maxy</span><span class="ss">)</span>``
<span class="o">-</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">geometry</span><span class="w"> </span><span class="nv">lies</span><span class="w"> </span><span class="nv">outside</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">products</span><span class="w"> </span><span class="nv">IW1</span><span class="o">/</span><span class="nv">IW2</span><span class="o">/</span><span class="nv">IW3</span><span class="w"> </span><span class="nv">coverage</span>.
<span class="o">-</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">AOI</span><span class="w"> </span><span class="nv">polygon</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">intersect</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">chosen</span><span class="w"> </span><span class="nv">sub</span><span class="o">-</span><span class="nv">swath</span>.

<span class="nv">FileNotFoundError</span>:
<span class="o">-</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">annotation</span><span class="w"> </span><span class="nv">XML</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">found</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">selected</span><span class="w"> </span><span class="nv">sub</span><span class="o">-</span><span class="nv">swath</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="k">def</span><span class="w"> </span><span class="nf">burst_for_geometry</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">safe_dir</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">subswath</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="sd">    Determine TOPS burst index (or range) for a geometry in a Sentinel-1 IW SLC.</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="sd">      product   : Input SAR product.</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="sd">      safe_dir  : path to the *.SAFE folder (str or Path)</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="sd">      geom      : Shapely Point/Polygon, or WKT string, or bbox tuple (minlon,minlat,maxlon,maxlat)</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">      subswath  : optional &#39;IW1&#39;|&#39;IW2&#39;|&#39;IW3&#39; to force a swath</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="sd">    Returns (dict):</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="sd">      {</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="sd">        &#39;swath&#39;: &#39;IW1&#39;|&#39;IW2&#39;|&#39;IW3&#39;,</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="sd">        &#39;band_name&#39;: &#39;Intensity_IW1_VV&#39;,   # band used</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">        &#39;linesPerBurst&#39;: 1495,</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">        &#39;numberOfBursts&#39;: 10,</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">        &#39;burst&#39;: 5,              # for Point</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">        &#39;firstBurst&#39;: 4,         # for Polygon</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">        &#39;lastBurst&#39;: 6,          # for Polygon</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">        &#39;geom_type&#39;: &#39;Point&#39;|&#39;Polygon&#39;</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">      }</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="sd">        ValueError: </span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="sd">        - If geom is not a Shapely Point/Polygon, a WKT string, or a 4-element bbox ``(minx, miny, maxx, maxy)``</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">        - If the geometry lies outside the products IW1/IW2/IW3 coverage.</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">        - If the AOI polygon does not intersect the chosen sub-swath.</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">        FileNotFoundError:</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">        - If no annotation XML file is found for the selected sub-swath</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="c1"># --- normalize geometry ---</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="n">geom</span> <span class="o">=</span> <span class="n">box</span><span class="p">(</span><span class="o">*</span><span class="n">geom</span><span class="p">)</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="n">geom</span> <span class="o">=</span> <span class="n">_wkt</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="p">(</span><span class="n">Point</span><span class="p">,</span> <span class="n">Polygon</span><span class="p">)):</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;geom must be Point/Polygon, WKT string, or bbox tuple&quot;</span><span class="p">)</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="n">is_point</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">Point</span><span class="p">)</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>    <span class="n">aoi</span> <span class="o">=</span> <span class="n">geom</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">is_point</span> <span class="k">else</span> <span class="n">geom</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>    <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">getBandNames</span><span class="p">())</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span class="c1"># --- pick a band that actually covers the geometry (auto-detect swath if needed) ---</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">band_contains_point</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">):</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>        <span class="n">gc</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">getGeoCoding</span><span class="p">()</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span class="k">if</span> <span class="n">gc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="n">pp</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">getPixelPos</span><span class="p">(</span><span class="n">GeoPos</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">lat</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">lon</span><span class="p">)),</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="n">ok</span> <span class="o">=</span> <span class="p">(</span><span class="n">pp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">math</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="n">math</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>              <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">pp</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">band</span><span class="o">.</span><span class="n">getRasterWidth</span><span class="p">()</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>              <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">pp</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">band</span><span class="o">.</span><span class="n">getRasterHeight</span><span class="p">())</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span class="k">return</span> <span class="n">ok</span><span class="p">,</span> <span class="n">pp</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>    <span class="c1"># center we’ll use to probe coverage</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="n">probe</span> <span class="o">=</span> <span class="p">(</span><span class="n">aoi</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">aoi</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_point</span> <span class="k">else</span> <span class="p">(</span><span class="n">aoi</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">aoi</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span class="n">sw_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">subswath</span><span class="p">]</span> <span class="k">if</span> <span class="n">subswath</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;IW1&quot;</span><span class="p">,</span> <span class="s2">&quot;IW2&quot;</span><span class="p">,</span> <span class="s2">&quot;IW3&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;IW1&quot;</span><span class="p">,</span> <span class="s2">&quot;IW2&quot;</span><span class="p">,</span> <span class="s2">&quot;IW3&quot;</span><span class="p">]</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>    <span class="n">chosen_sw</span><span class="p">,</span> <span class="n">chosen_band_name</span><span class="p">,</span> <span class="n">chosen_pp</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="k">for</span> <span class="n">sw</span> <span class="ow">in</span> <span class="n">sw_order</span><span class="p">:</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>        <span class="n">cands</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">names</span> <span class="k">if</span> <span class="n">sw</span> <span class="ow">in</span> <span class="n">n</span><span class="p">]</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">cands</span><span class="p">:</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>            <span class="n">ok</span><span class="p">,</span> <span class="n">pp</span> <span class="o">=</span> <span class="n">band_contains_point</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">getBand</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="o">*</span><span class="n">probe</span><span class="p">)</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>            <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>                <span class="n">chosen_sw</span><span class="p">,</span> <span class="n">chosen_band_name</span><span class="p">,</span> <span class="n">chosen_pp</span> <span class="o">=</span> <span class="n">sw</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">pp</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>                <span class="k">break</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>        <span class="k">if</span> <span class="n">chosen_sw</span><span class="p">:</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>            <span class="k">break</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>    <span class="k">if</span> <span class="n">chosen_sw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Geometry is outside IW1/IW2/IW3 coverage for this product.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span class="n">band</span> <span class="o">=</span> <span class="n">product</span><span class="o">.</span><span class="n">getBand</span><span class="p">(</span><span class="n">chosen_band_name</span><span class="p">)</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>    <span class="n">gc</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">getGeoCoding</span><span class="p">()</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>    <span class="n">W</span><span class="p">,</span> <span class="n">H</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">getRasterWidth</span><span class="p">(),</span> <span class="n">band</span><span class="o">.</span><span class="n">getRasterHeight</span><span class="p">()</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>    <span class="c1"># --- read annotation XML for this swath (namespace-agnostic) ---</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>    <span class="n">safe_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">safe_dir</span><span class="p">)</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>    <span class="n">ann_dir</span> <span class="o">=</span> <span class="n">safe_dir</span> <span class="o">/</span> <span class="s2">&quot;annotation&quot;</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span class="n">xml_files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">ann_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;*</span><span class="si">{</span><span class="n">chosen_sw</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">*.xml&quot;</span><span class="p">))</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">xml_files</span><span class="p">:</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No annotation XML found for </span><span class="si">{</span><span class="n">chosen_sw</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">ann_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>    <span class="n">root</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">xml_files</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">find_text_any</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">local</span><span class="p">):</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>            <span class="k">if</span> <span class="n">el</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">local</span> <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>                <span class="k">return</span> <span class="n">el</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>    <span class="n">txt_lpb</span> <span class="o">=</span> <span class="n">find_text_any</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;linesPerBurst&quot;</span><span class="p">)</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="n">bursts_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">el</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">iter</span><span class="p">()</span> <span class="k">if</span> <span class="n">el</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;burst&quot;</span><span class="p">]</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="n">numberOfBursts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">find_text_any</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;numberOfBursts&quot;</span><span class="p">))</span> <span class="k">if</span> <span class="n">find_text_any</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;numberOfBursts&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="n">bursts_nodes</span><span class="p">)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>    <span class="k">if</span> <span class="n">txt_lpb</span><span class="p">:</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>        <span class="n">linesPerBurst</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">txt_lpb</span><span class="p">)</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span class="c1"># try infer from firstAzimuthLine step, else fallback to H / numBursts</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="n">first_lines</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bursts_nodes</span><span class="p">[:</span><span class="mi">2</span><span class="p">]:</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">b</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>                <span class="k">if</span> <span class="n">el</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;firstAzimuthLine&quot;</span> <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>                    <span class="n">first_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">text</span><span class="p">));</span> <span class="k">break</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>        <span class="n">linesPerBurst</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">first_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">first_lines</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">first_lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">H</span> <span class="o">//</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numberOfBursts</span><span class="p">))</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>    <span class="n">out</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span class="s2">&quot;sub-swath&quot;</span><span class="p">:</span> <span class="n">chosen_sw</span><span class="p">,</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>        <span class="s2">&quot;band_name&quot;</span><span class="p">:</span> <span class="n">chosen_band_name</span><span class="p">,</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>        <span class="s2">&quot;linesPerBurst&quot;</span><span class="p">:</span> <span class="n">linesPerBurst</span><span class="p">,</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>        <span class="s2">&quot;numberOfBursts&quot;</span><span class="p">:</span> <span class="n">numberOfBursts</span><span class="p">,</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>        <span class="s2">&quot;geom_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span> <span class="k">if</span> <span class="n">is_point</span> <span class="k">else</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>    <span class="p">}</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>    <span class="c1"># --- map geometry to pixel rows and compute burst index / range ---</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clamp_b</span><span class="p">(</span><span class="n">b</span><span class="p">):</span> <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">numberOfBursts</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>    <span class="k">if</span> <span class="n">is_point</span><span class="p">:</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>        <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">chosen_pp</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>        <span class="n">out</span><span class="p">[</span><span class="s2">&quot;burst&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clamp_b</span><span class="p">(</span><span class="n">y</span> <span class="o">//</span> <span class="n">linesPerBurst</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>        <span class="c1"># use exterior vertices (and centroid) to get min/max valid rows</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>        <span class="n">ys</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>        <span class="k">for</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">aoi</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="o">+</span> <span class="p">[(</span><span class="n">aoi</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">aoi</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">y</span><span class="p">)]:</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>            <span class="n">pp</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">getPixelPos</span><span class="p">(</span><span class="n">GeoPos</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">lat</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">lon</span><span class="p">)),</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">pp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">math</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">pp</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">H</span><span class="p">):</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>                <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">ys</span><span class="p">:</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;AOI polygon does not intersect the chosen sub-swath.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>        <span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ys</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>        <span class="n">out</span><span class="p">[</span><span class="s2">&quot;firstBurst&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clamp_b</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">y_min</span><span class="p">)</span> <span class="o">//</span> <span class="n">linesPerBurst</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>        <span class="n">out</span><span class="p">[</span><span class="s2">&quot;lastBurst&quot;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">clamp_b</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">y_max</span><span class="p">)</span> <span class="o">//</span> <span class="n">linesPerBurst</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.enhanced_spectral_diversity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">enhanced_spectral_diversity</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">preset</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">)</span></code>

<a href="#pysarflow.slc.enhanced_spectral_diversity" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Enhanced Spectral Diversity (ESD) with sensible defaults + optional overrides.</p>
<p>Args:
    product:
        A SNAP <code>Product</code> — usually the output of Back-Geocoding
        containing the master and one or more slave images.
    preset:
        Convenience preset passed to <code>esd_parameters(preset)</code> that supplies a
        default parameter set. Expected values:
        - <code>"default"</code> - full computation.
        - <code>"fast"</code>  – less lighter computation.
        - <code>"faster"</code>    – lighter computation.
    **overrides:
        Any ESD operator parameter you want to force/override from the
        preset (e.g., <code>cohWinAz=5</code>, <code>cohWinRg=10</code>, <code>maxIterations=25</code>,
        etc.). Keys must match the operator's parameter names.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>Product</code></b>              –
              <div class="doc-md-description">
                <p>A new SNAP <code>Product</code> with ESD refinement applied.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="k">def</span><span class="w"> </span><span class="nf">enhanced_spectral_diversity</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">preset</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">    Enhanced Spectral Diversity (ESD) with sensible defaults + optional overrides.</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">     Args:</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">        product:</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">            A SNAP `Product` — usually the output of Back-Geocoding</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">            containing the master and one or more slave images.</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">        preset:</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">            Convenience preset passed to `esd_parameters(preset)` that supplies a</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">            default parameter set. Expected values:</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">            - `&quot;default&quot;` - full computation.</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="sd">            - `&quot;fast&quot;`  – less lighter computation.</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="sd">            - `&quot;faster&quot;`    – lighter computation.</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">        **overrides:</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="sd">            Any ESD operator parameter you want to force/override from the</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">            preset (e.g., `cohWinAz=5`, `cohWinRg=10`, `maxIterations=25`,</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">            etc.). Keys must match the operator&#39;s parameter names.</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a><span class="sd">        Product: A new SNAP `Product` with ESD refinement applied.</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">esd_parameters</span><span class="p">(</span><span class="n">preset</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>    <span class="c1"># user overrides win if provided</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">overrides</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>    <span class="n">esd</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Enhanced-Spectral-Diversity&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>    <span class="k">return</span> <span class="n">esd</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.goldstein_phase_filtering" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">goldstein_phase_filtering</span><span class="p">(</span><span class="n">product</span><span class="p">)</span></code>

<a href="#pysarflow.slc.goldstein_phase_filtering" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Apply Goldstein Phase Filtering to an interferogram.</p>
<p>Goldstein filtering is used in InSAR processing to enhance the signal-to-noise 
ratio of the interferometric phase. This filter suppresses noise while preserving 
the phase fringes, improving the quality of unwrapping and subsequent deformation 
analysis.</p>
<h4 id="pysarflow.slc.goldstein_phase_filtering--args">Args:<a class="headerlink" href="#pysarflow.slc.goldstein_phase_filtering--args" title="Permanent link">&para;</a></h4>
<p>product : org.esa.snap.core.datamodel.Product
    The input product containing the interferometric phase, typically the 
    output of the "Interferogram" operator.</p>
<h4 id="pysarflow.slc.goldstein_phase_filtering--returns">Returns:<a class="headerlink" href="#pysarflow.slc.goldstein_phase_filtering--returns" title="Permanent link">&para;</a></h4>
<p>output : org.esa.snap.core.datamodel.Product
    The product with Goldstein phase filtering applied.</p>
<h4 id="pysarflow.slc.goldstein_phase_filtering--notes">Notes:<a class="headerlink" href="#pysarflow.slc.goldstein_phase_filtering--notes" title="Permanent link">&para;</a></h4>
<ul>
<li><code>alpha</code>: Controls the filtering strength. Higher values result in stronger 
  filtering (default is 1.0).</li>
<li><code>FFTSizeString</code>: Defines the FFT window size used for filtering (default is '64').</li>
<li><code>windowSizeString</code>: Defines the size of the filtering window (default is '3').</li>
<li><code>useCoherenceMask</code>: If set to True, filtering is applied only where coherence 
  exceeds the given threshold.</li>
<li><code>coherenceThreshold</code>: Minimum coherence value used if coherence masking is enabled 
  (default is 0.2, but ignored if <code>useCoherenceMask</code> is False).</li>
</ul>
<p>This function is typically used after interferogram generation and before phase 
unwrapping in an InSAR processing chain.</p>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="k">def</span><span class="w"> </span><span class="nf">goldstein_phase_filtering</span><span class="p">(</span><span class="n">product</span><span class="p">):</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">    Apply Goldstein Phase Filtering to an interferogram.</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">    Goldstein filtering is used in InSAR processing to enhance the signal-to-noise </span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="sd">    ratio of the interferometric phase. This filter suppresses noise while preserving </span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="sd">    the phase fringes, improving the quality of unwrapping and subsequent deformation </span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">    analysis.</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">    product : org.esa.snap.core.datamodel.Product</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">        The input product containing the interferometric phase, typically the </span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">        output of the &quot;Interferogram&quot; operator.</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">    -------</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">    output : org.esa.snap.core.datamodel.Product</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">        The product with Goldstein phase filtering applied.</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">    -----</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">    - `alpha`: Controls the filtering strength. Higher values result in stronger </span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a><span class="sd">      filtering (default is 1.0).</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a><span class="sd">    - `FFTSizeString`: Defines the FFT window size used for filtering (default is &#39;64&#39;).</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="sd">    - `windowSizeString`: Defines the size of the filtering window (default is &#39;3&#39;).</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="sd">    - `useCoherenceMask`: If set to True, filtering is applied only where coherence </span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="sd">      exceeds the given threshold.</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">    - `coherenceThreshold`: Minimum coherence value used if coherence masking is enabled </span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a><span class="sd">      (default is 0.2, but ignored if `useCoherenceMask` is False).</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a><span class="sd">    This function is typically used after interferogram generation and before phase </span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a><span class="sd">    unwrapping in an InSAR processing chain.</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Apply Goldstein Phase Filtering...&#39;</span><span class="p">)</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;FFTSizeString&#39;</span><span class="p">,</span> <span class="s1">&#39;64&#39;</span><span class="p">)</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;windowSizeString&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">)</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;useCoherenceMask&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;coherenceThreshold&#39;</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>  
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;GoldsteinPhaseFiltering&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Goldstein Phase Filtering applied!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.interferogram" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">interferogram</span><span class="p">(</span><span class="n">product</span><span class="p">)</span></code>

<a href="#pysarflow.slc.interferogram" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Generate an interferogram from a Sentinel-1 interferometric product.</p>
<p>This function uses the SNAP Graph Processing Framework (GPF) to create 
an interferogram, which represents the phase difference between two 
co-registered SAR images. The interferogram is an essential step in 
interferometric SAR (InSAR) processing for deriving surface deformation, 
elevation models, or coherence analysis.</p>
<h4 id="pysarflow.slc.interferogram--args">Args:<a class="headerlink" href="#pysarflow.slc.interferogram--args" title="Permanent link">&para;</a></h4>
<p>product : org.esa.snap.core.datamodel.Product
    The co-registered Sentinel-1 product (usually the output of the 
    "Back-Geocoding" operator with two coregistered images).</p>
<h4 id="pysarflow.slc.interferogram--returns">Returns:<a class="headerlink" href="#pysarflow.slc.interferogram--returns" title="Permanent link">&para;</a></h4>
<p>output : org.esa.snap.core.datamodel.Product
    The product containing the generated interferogram and optional 
    coherence band.</p>
<h4 id="pysarflow.slc.interferogram--notes">Notes:<a class="headerlink" href="#pysarflow.slc.interferogram--notes" title="Permanent link">&para;</a></h4>
<ul>
<li>The function uses predefined parameters for flat-earth phase removal, 
  polynomial fitting, and orbit interpolation.</li>
<li>Coherence estimation is enabled by default.</li>
<li>Pixel size is set to be square.</li>
<li>Uncomment and customize the window size parameters if you want to control 
  the coherence estimation resolution.</li>
<li>This function is typically followed by Goldstein filtering and phase 
  unwrapping steps in an InSAR workflow.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="k">def</span><span class="w"> </span><span class="nf">interferogram</span><span class="p">(</span><span class="n">product</span><span class="p">):</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><span class="sd">    Generate an interferogram from a Sentinel-1 interferometric product.</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="sd">    This function uses the SNAP Graph Processing Framework (GPF) to create </span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="sd">    an interferogram, which represents the phase difference between two </span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><span class="sd">    co-registered SAR images. The interferogram is an essential step in </span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><span class="sd">    interferometric SAR (InSAR) processing for deriving surface deformation, </span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><span class="sd">    elevation models, or coherence analysis.</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a><span class="sd">    product : org.esa.snap.core.datamodel.Product</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a><span class="sd">        The co-registered Sentinel-1 product (usually the output of the </span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a><span class="sd">        &quot;Back-Geocoding&quot; operator with two coregistered images).</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><span class="sd">    -------</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><span class="sd">    output : org.esa.snap.core.datamodel.Product</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a><span class="sd">        The product containing the generated interferogram and optional </span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><span class="sd">        coherence band.</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><span class="sd">    -----</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="sd">    - The function uses predefined parameters for flat-earth phase removal, </span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">      polynomial fitting, and orbit interpolation.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><span class="sd">    - Coherence estimation is enabled by default.</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="sd">    - Pixel size is set to be square.</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="sd">    - Uncomment and customize the window size parameters if you want to control </span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><span class="sd">      the coherence estimation resolution.</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a><span class="sd">    - This function is typically followed by Goldstein filtering and phase </span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a><span class="sd">      unwrapping steps in an InSAR workflow.</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Creating interferogram ...&#39;</span><span class="p">)</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Subtract flat-earth phase&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Degree of </span><span class="se">\&quot;</span><span class="s2">Flat Earth</span><span class="se">\&quot;</span><span class="s2"> polynomial&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Number of </span><span class="se">\&quot;</span><span class="s2">Flat Earth</span><span class="se">\&quot;</span><span class="s2"> estimation points&quot;</span><span class="p">,</span> <span class="mi">501</span><span class="p">)</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Orbit interpolation degree&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Include coherence estimation&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Square Pixel&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Independent Window Sizes&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>    <span class="c1">#parameters.put(&quot;Coherence Azimuth Window Size&quot;, 10)</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>    <span class="c1">#parameters.put(&quot;Coherence Range Window Size&quot;, 2)</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Interferogram&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span> 
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Interferogram created!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.multilooking" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">multilooking</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">n_rg</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">n_az</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">source_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_intensity</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#pysarflow.slc.multilooking" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>SNAP 'Multilook' operator.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code>        </code>)
              –
              <div class="doc-md-description">
                <p>SNAP Product (typically AFTER TOPSAR-Deburst)</p>
              </div>
            </li>
            <li>
              <b><code>n_rg</code></b>
                  (<code>int)      </code>, default:
                      <code>3</code>
)
              –
              <div class="doc-md-description">
                <p>number of looks in range (speckle ↓, res ↓)</p>
              </div>
            </li>
            <li>
              <b><code>n_az</code></b>
                  (<code>int)      </code>, default:
                      <code>1</code>
)
              –
              <div class="doc-md-description">
                <p>number of looks in azimuth</p>
              </div>
            </li>
            <li>
              <b><code>source_bands</code></b>
                  (<code>   </code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>optional list/CSV of bands to process (e.g. 'i_<em>,q_</em>,coh_*')</p>
              </div>
            </li>
            <li>
              <b><code>output_intensity</code></b>
              –
              <div class="doc-md-description">
                <p>for complex inputs, also write intensity bands</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>SNAP Product with multilooked bands</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="k">def</span><span class="w"> </span><span class="nf">multilooking</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">n_rg</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">n_az</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">source_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_intensity</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="sd">    SNAP &#39;Multilook&#39; operator.</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">      product         : SNAP Product (typically AFTER TOPSAR-Deburst)</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">      n_rg (int)      : number of looks in range (speckle ↓, res ↓)</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">      n_az (int)      : number of looks in azimuth</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a><span class="sd">      source_bands    : optional list/CSV of bands to process (e.g. &#39;i_*,q_*,coh_*&#39;)</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">      output_intensity: for complex inputs, also write intensity bands</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="sd">      SNAP Product with multilooked bands</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>    <span class="n">Integer</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s1">&#39;java.lang.Integer&#39;</span><span class="p">)</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>    <span class="n">Boolean</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s1">&#39;java.lang.Boolean&#39;</span><span class="p">)</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;nRgLooks&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">(</span><span class="n">n_rg</span><span class="p">))</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;nAzLooks&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">(</span><span class="n">n_az</span><span class="p">))</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;outputIntensity&#39;</span><span class="p">,</span> <span class="n">Boolean</span><span class="p">(</span><span class="n">output_intensity</span><span class="p">))</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>    <span class="k">if</span> <span class="n">source_bands</span><span class="p">:</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source_bands</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>            <span class="n">source_bands</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_bands</span><span class="p">)</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;sourceBands&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_bands</span><span class="p">))</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>    <span class="k">return</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s1">&#39;Multilook&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.phase_to_elevation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">phase_to_elevation</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">DEM</span><span class="p">)</span></code>

<a href="#pysarflow.slc.phase_to_elevation" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Convert unwrapped interferometric phase to elevation using a Digital Elevation Model (DEM).</p>
<p>This function uses the SNAP Graph Processing Framework (GPF) to apply the 
"Phase to Elevation" operator. It transforms unwrapped phase data into an 
elevation map by referencing a known DEM. This step is commonly used in 
Differential InSAR (DInSAR) or when generating DEMs from SAR data.</p>
<h4 id="pysarflow.slc.phase_to_elevation--args">Args:<a class="headerlink" href="#pysarflow.slc.phase_to_elevation--args" title="Permanent link">&para;</a></h4>
<p>product : org.esa.snap.core.datamodel.Product
    The input product containing unwrapped interferometric phase, typically 
    the result of a phase unwrapping operator.</p>


<details class="dem-" open>
  <summary>str</summary>
  <p>The name of the DEM to use for reference (e.g., 'SRTM 3Sec', 'Copernicus 30m', 
or path to an external DEM file).</p>
</details>        <h4 id="pysarflow.slc.phase_to_elevation--returns">Returns:<a class="headerlink" href="#pysarflow.slc.phase_to_elevation--returns" title="Permanent link">&para;</a></h4>
<p>output : org.esa.snap.core.datamodel.Product
    The product containing the elevation map derived from phase data.</p>
<h4 id="pysarflow.slc.phase_to_elevation--notes">Notes:<a class="headerlink" href="#pysarflow.slc.phase_to_elevation--notes" title="Permanent link">&para;</a></h4>
<ul>
<li>The DEM is used to geocode the elevation output and aid in the transformation.</li>
<li>Bilinear interpolation is used to resample the DEM for better accuracy.</li>
<li><code>externalDEMNoDataValue</code> is set to 0.0, which defines how to handle no-data pixels 
  in the DEM.</li>
<li>This step assumes the input phase has already been unwrapped and filtered.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-743" name="__codelineno-0-743"></a><span class="k">def</span><span class="w"> </span><span class="nf">phase_to_elevation</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">DEM</span><span class="p">):</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a><span class="sd">    Convert unwrapped interferometric phase to elevation using a Digital Elevation Model (DEM).</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a><span class="sd">    This function uses the SNAP Graph Processing Framework (GPF) to apply the </span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a><span class="sd">    &quot;Phase to Elevation&quot; operator. It transforms unwrapped phase data into an </span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a><span class="sd">    elevation map by referencing a known DEM. This step is commonly used in </span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a><span class="sd">    Differential InSAR (DInSAR) or when generating DEMs from SAR data.</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a><span class="sd">    product : org.esa.snap.core.datamodel.Product</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a><span class="sd">        The input product containing unwrapped interferometric phase, typically </span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a><span class="sd">        the result of a phase unwrapping operator.</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a><span class="sd">    DEM : str</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a><span class="sd">        The name of the DEM to use for reference (e.g., &#39;SRTM 3Sec&#39;, &#39;Copernicus 30m&#39;, </span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a><span class="sd">        or path to an external DEM file).</span>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a><span class="sd">    -------</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a><span class="sd">    output : org.esa.snap.core.datamodel.Product</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="sd">        The product containing the elevation map derived from phase data.</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a><span class="sd">    -----</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a><span class="sd">    - The DEM is used to geocode the elevation output and aid in the transformation.</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a><span class="sd">    - Bilinear interpolation is used to resample the DEM for better accuracy.</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a><span class="sd">    - `externalDEMNoDataValue` is set to 0.0, which defines how to handle no-data pixels </span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a><span class="sd">      in the DEM.</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a><span class="sd">    - This step assumes the input phase has already been unwrapped and filtered.</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Turning Phase to Elevation...&#39;</span><span class="p">)</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;demName&#39;</span><span class="p">,</span> <span class="n">DEM</span><span class="p">)</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;demResamplingMethod&#39;</span><span class="p">,</span> <span class="s1">&#39;BILINEAR_INTERPOLATION&#39;</span><span class="p">)</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;externalDEMNoDataValue&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;PhaseToElevation&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Phase to Elevation applied!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.plot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot</span><span class="p">(</span><span class="n">dim_path</span><span class="p">,</span> <span class="n">i_band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">q_band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coh_band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">downsample</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">fade</span><span class="o">=</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_rgb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#pysarflow.slc.plot" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Visualize an interferogram as SNAP-like rainbow (HSV). This can be used to plot any interferogram outputs</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>dim_path</code></b>
                  (<code>  </code>)
              –
              <div class="doc-md-description">
                <p>path to the .dim file (next to the .data/ folder)</p>
              </div>
            </li>
            <li>
              <b><code>i_band</code></b>
                  (<code>    </code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>name of the real (i) interferogram band; auto-detected if None</p>
              </div>
            </li>
            <li>
              <b><code>q_band</code></b>
                  (<code>    </code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>name of the imag (q) interferogram band; auto-detected if None</p>
              </div>
            </li>
            <li>
              <b><code>coh_band</code></b>
                  (<code>  </code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>name of the coherence band; auto-detected if None</p>
              </div>
            </li>
            <li>
              <b><code>downsample</code></b>
              –
              <div class="doc-md-description">
                <p>integer stride for quick viewing (e.g., 2, 4)</p>
              </div>
            </li>
            <li>
              <b><code>fade</code></b>
                  (<code>      </code>, default:
                      <code>(0.2, 0.8)</code>
)
              –
              <div class="doc-md-description">
                <p>tuple (v_min, v_max) mapping coherence → value (brightness)</p>
              </div>
            </li>
            <li>
              <b><code>title</code></b>
                  (<code>     </code>, default:
                      <code>&#39;&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>plot title</p>
              </div>
            </li>
            <li>
              <b><code>save_path</code></b>
                  (<code> </code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>if set, write the RGB to this path (e.g., 'phase.png')</p>
              </div>
            </li>
            <li>
              <b><code>return_rgb</code></b>
              –
              <div class="doc-md-description">
                <p>if True, return the RGB numpy array</p>
              </div>
            </li>
            <li>
              <b><code>ax</code></b>
                  (<code>        </code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>optional matplotlib axes to draw on</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>rgb (H,W,3) array if return_rgb=True, else None.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>    <span class="n">dim_path</span><span class="p">,</span>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a>    <span class="n">i_band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">q_band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coh_band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a>    <span class="n">downsample</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a>    <span class="n">fade</span><span class="o">=</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span>          <span class="c1"># (min,max) brightness from coherence</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a>    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a>    <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a>    <span class="n">return_rgb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a>    <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a><span class="p">):</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a><span class="sd">    Visualize an interferogram as SNAP-like rainbow (HSV). This can be used to plot any interferogram outputs</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a><span class="sd">      dim_path   : path to the .dim file (next to the .data/ folder)</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a><span class="sd">      i_band     : name of the real (i) interferogram band; auto-detected if None</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a><span class="sd">      q_band     : name of the imag (q) interferogram band; auto-detected if None</span>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a><span class="sd">      coh_band   : name of the coherence band; auto-detected if None</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a><span class="sd">      downsample : integer stride for quick viewing (e.g., 2, 4)</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a><span class="sd">      fade       : tuple (v_min, v_max) mapping coherence → value (brightness)</span>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a><span class="sd">      title      : plot title</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a><span class="sd">      save_path  : if set, write the RGB to this path (e.g., &#39;phase.png&#39;)</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a><span class="sd">      return_rgb : if True, return the RGB numpy array</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a><span class="sd">      ax         : optional matplotlib axes to draw on</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a><span class="sd">      rgb (H,W,3) array if return_rgb=True, else None.</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>    <span class="n">p</span> <span class="o">=</span> <span class="n">ProductIO</span><span class="o">.</span><span class="n">readProduct</span><span class="p">(</span><span class="n">dim_path</span><span class="p">)</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>        <span class="c1"># --- band auto-detect (if names not given) ---</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>        <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">getBandNames</span><span class="p">())</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">pick</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>                <span class="n">nn</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a>                <span class="k">if</span> <span class="n">nn</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>  <span class="c1"># strict startswith</span>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a>                    <span class="k">return</span> <span class="n">n</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a>            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>                 <span class="c1"># fallback: contains</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>                <span class="k">if</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">n</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>                    <span class="k">return</span> <span class="n">n</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>        <span class="n">i_band</span>  <span class="o">=</span> <span class="n">i_band</span>  <span class="ow">or</span> <span class="n">pick</span><span class="p">(</span><span class="s1">&#39;i_ifg&#39;</span><span class="p">)</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a>        <span class="n">q_band</span>  <span class="o">=</span> <span class="n">q_band</span>  <span class="ow">or</span> <span class="n">pick</span><span class="p">(</span><span class="s1">&#39;q_ifg&#39;</span><span class="p">)</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a>        <span class="n">coh_band</span> <span class="o">=</span> <span class="n">coh_band</span> <span class="ow">or</span> <span class="n">pick</span><span class="p">(</span><span class="s1">&#39;coh_&#39;</span><span class="p">)</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">i_band</span> <span class="ow">and</span> <span class="n">q_band</span> <span class="ow">and</span> <span class="n">coh_band</span><span class="p">):</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a>                <span class="sa">f</span><span class="s2">&quot;Could not find required bands. &quot;</span>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a>                <span class="sa">f</span><span class="s2">&quot;i_band=</span><span class="si">{</span><span class="n">i_band</span><span class="si">}</span><span class="s2">, q_band=</span><span class="si">{</span><span class="n">q_band</span><span class="si">}</span><span class="s2">, coh_band=</span><span class="si">{</span><span class="n">coh_band</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a>                <span class="sa">f</span><span class="s2">&quot;Available: </span><span class="si">{</span><span class="n">names</span><span class="p">[:</span><span class="mi">12</span><span class="p">]</span><span class="si">}{</span><span class="s1">&#39; ...&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">12</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a>            <span class="p">)</span>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a>        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getSceneRasterWidth</span><span class="p">(),</span> <span class="n">p</span><span class="o">.</span><span class="n">getSceneRasterHeight</span><span class="p">()</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a>        <span class="n">buf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="n">h</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a>        <span class="n">bi</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getBand</span><span class="p">(</span><span class="n">i_band</span><span class="p">);</span> <span class="n">bi</span><span class="o">.</span><span class="n">readPixels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">buf</span><span class="p">);</span> <span class="n">i</span> <span class="o">=</span> <span class="n">buf</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a>        <span class="n">bq</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getBand</span><span class="p">(</span><span class="n">q_band</span><span class="p">);</span> <span class="n">bq</span><span class="o">.</span><span class="n">readPixels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">buf</span><span class="p">);</span> <span class="n">q</span> <span class="o">=</span> <span class="n">buf</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a>        <span class="n">bc</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getBand</span><span class="p">(</span><span class="n">coh_band</span><span class="p">);</span> <span class="n">bc</span><span class="o">.</span><span class="n">readPixels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">buf</span><span class="p">);</span> <span class="n">coh</span> <span class="o">=</span> <span class="n">buf</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a>        <span class="k">if</span> <span class="n">downsample</span> <span class="ow">and</span> <span class="n">downsample</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a>            <span class="n">s</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">downsample</span><span class="p">))</span>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a>            <span class="n">i</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">coh</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">],</span> <span class="n">coh</span><span class="p">[</span><span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">]</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a>        <span class="c1"># --- phase → HSV ---</span>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a>        <span class="n">phase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>                         <span class="c1"># [-pi, +pi]</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a>        <span class="n">hue</span>   <span class="o">=</span> <span class="p">(</span><span class="n">phase</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>              <span class="c1"># [0,1]</span>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a>        <span class="n">sat</span>   <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">hue</span><span class="p">)</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a>        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">fade</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a>        <span class="n">val</span>   <span class="o">=</span> <span class="n">vmin</span> <span class="o">+</span> <span class="p">(</span><span class="n">vmax</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">coh</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a>        <span class="n">rgb</span> <span class="o">=</span> <span class="n">hsv_to_rgb</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">([</span><span class="n">hue</span><span class="p">,</span> <span class="n">sat</span><span class="p">,</span> <span class="n">val</span><span class="p">]))</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a>        <span class="c1"># --- plot ---</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a>        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a>            <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">rgb</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;upper&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([]);</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a>        <span class="k">if</span> <span class="n">save_path</span><span class="p">:</span>
<a id="__codelineno-0-1094" name="__codelineno-0-1094"></a>            <span class="c1"># matplotlib expects 0..1 floats; rgb already is</span>
<a id="__codelineno-0-1095" name="__codelineno-0-1095"></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imsave</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">rgb</span><span class="p">)</span>
<a id="__codelineno-0-1096" name="__codelineno-0-1096"></a>
<a id="__codelineno-0-1097" name="__codelineno-0-1097"></a>        <span class="k">return</span> <span class="n">rgb</span> <span class="k">if</span> <span class="n">return_rgb</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-0-1098" name="__codelineno-0-1098"></a>
<a id="__codelineno-0-1099" name="__codelineno-0-1099"></a>    <span class="k">finally</span><span class="p">:</span>
<a id="__codelineno-0-1100" name="__codelineno-0-1100"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1101" name="__codelineno-0-1101"></a>            <span class="n">p</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>
<a id="__codelineno-0-1102" name="__codelineno-0-1102"></a>        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<a id="__codelineno-0-1103" name="__codelineno-0-1103"></a>             <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.read_slc_product" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_slc_product</span><span class="p">(</span><span class="n">product_path</span><span class="p">)</span></code>

<a href="#pysarflow.slc.read_slc_product" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Reads a Sentinel-1 SLC product using SNAP's ProductIO.</p>
<p>This function checks whether the provided product path exists on disk, then
attempts to load the product using ProductIO.readProduct. If the product
cannot be read, it raises a RuntimeError with details about the failure.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product_path</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>Path to the Sentinel-1 SAFE format product directory or file.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>product</code></b>              –
              <div class="doc-md-description">
                <p>The SNAP product object representing the loaded Sentinel-1 data.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="FileNotFoundError">FileNotFoundError</span></code>
              –
              <div class="doc-md-description">
                <p>If the specified product path does not exist.</p>
              </div>
            </li>
            <li>
                  <code><span title="RuntimeError">RuntimeError</span></code>
              –
              <div class="doc-md-description">
                <p>If reading the product fails due to unexpected errors.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="k">def</span><span class="w"> </span><span class="nf">read_slc_product</span><span class="p">(</span><span class="n">product_path</span><span class="p">):</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    Reads a Sentinel-1 SLC product using SNAP&#39;s ProductIO.</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    This function checks whether the provided product path exists on disk, then</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    attempts to load the product using ProductIO.readProduct. If the product</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">    cannot be read, it raises a RuntimeError with details about the failure.</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">        product_path (str): Path to the Sentinel-1 SAFE format product directory or file.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">        product: The SNAP product object representing the loaded Sentinel-1 data.</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">        FileNotFoundError: If the specified product path does not exist.</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">        RuntimeError: If reading the product fails due to unexpected errors.</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">product_path</span><span class="p">):</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Product path does not exist: </span><span class="si">{</span><span class="n">product_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="n">product</span> <span class="o">=</span> <span class="n">ProductIO</span><span class="o">.</span><span class="n">readProduct</span><span class="p">(</span><span class="n">product_path</span><span class="p">)</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>        <span class="k">return</span> <span class="n">product</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>            <span class="sa">f</span><span class="s2">&quot;An error occurred while reading the slc product: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.save_product" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_product</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">output_dir</span><span class="o">=</span><span class="s1">&#39;_results&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;BEAM-DIMAP&#39;</span><span class="p">)</span></code>

<a href="#pysarflow.slc.save_product" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Save a SNAP product to disk.</p>
<h4 id="pysarflow.slc.save_product--args">Args<a class="headerlink" href="#pysarflow.slc.save_product--args" title="Permanent link">&para;</a></h4>
<p>product : snappy.Product
    The SNAP product to save.
filename : str
    Output filename (without extension).
output_dir : str, optional
    Directory where results will be saved (default: "_results").
fmt : str, optional
    Output format (default: "BEAM-DIMAP").</p>
<h4 id="pysarflow.slc.save_product--returns">Returns<a class="headerlink" href="#pysarflow.slc.save_product--returns" title="Permanent link">&para;</a></h4>
<p>str
    The full output path where the product was saved.</p>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-985" name="__codelineno-0-985"></a><span class="k">def</span><span class="w"> </span><span class="nf">save_product</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">output_dir</span><span class="o">=</span><span class="s2">&quot;_results&quot;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;BEAM-DIMAP&quot;</span><span class="p">):</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a><span class="sd">    Save a SNAP product to disk.</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a><span class="sd">    Args</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a><span class="sd">    product : snappy.Product</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a><span class="sd">        The SNAP product to save.</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a><span class="sd">    filename : str</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a><span class="sd">        Output filename (without extension).</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a><span class="sd">    output_dir : str, optional</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a><span class="sd">        Directory where results will be saved (default: &quot;_results&quot;).</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a><span class="sd">    fmt : str, optional</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a><span class="sd">        Output format (default: &quot;BEAM-DIMAP&quot;).</span>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a><span class="sd">    -------</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a><span class="sd">    str</span>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a><span class="sd">        The full output path where the product was saved.</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a>    <span class="n">out_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Saving product to </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">fmt</span><span class="si">}</span><span class="s2">)...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a>    <span class="n">ProductIO</span><span class="o">.</span><span class="n">writeProduct</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">out_path</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Product saved successfully.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a>    <span class="k">return</span> <span class="n">out_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.snaphu_export" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">snaphu_export</span><span class="p">(</span><span class="n">xml_path</span><span class="p">,</span> <span class="n">new_input_file</span><span class="p">,</span> <span class="n">new_target_folder</span><span class="p">)</span></code>

<a href="#pysarflow.slc.snaphu_export" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Modify a SNAP XML graph to update input and output paths, then execute it using GPT.</p>
<p>This function updates the SNAP XML workflow file by:
- Replacing the file path in the 'Read' node with the given input file.
- Replacing the target folder in the 'SnaphuExport' node with the given output folder.
After updating, it saves the modified XML and runs the graph using the <code>gpt</code> command-line tool.</p>
<h4 id="pysarflow.slc.snaphu_export--parameters">Parameters<a class="headerlink" href="#pysarflow.slc.snaphu_export--parameters" title="Permanent link">&para;</a></h4>
<p>xml_path : str
    Path to the SNAP XML graph file to be modified and executed.
new_input_file : str
    Path to the new input file (to replace the one in the 'Read' node).
new_target_folder : str
    Path to the new target folder (to replace the one in the 'SnaphuExport' node).</p>
<h4 id="pysarflow.slc.snaphu_export--returns">Returns<a class="headerlink" href="#pysarflow.slc.snaphu_export--returns" title="Permanent link">&para;</a></h4>
<p>None
    The function prints progress updates and the output of the <code>gpt</code> execution.</p>
<h4 id="pysarflow.slc.snaphu_export--raises">Raises<a class="headerlink" href="#pysarflow.slc.snaphu_export--raises" title="Permanent link">&para;</a></h4>
<p>FileNotFoundError
    If the provided <code>xml_path</code> does not exist.
xml.etree.ElementTree.ParseError
    If the XML file cannot be parsed.
subprocess.CalledProcessError
    If the <code>gpt</code> command execution fails.</p>
<h4 id="pysarflow.slc.snaphu_export--notes">Notes<a class="headerlink" href="#pysarflow.slc.snaphu_export--notes" title="Permanent link">&para;</a></h4>
<ul>
<li>Requires SNAP's Graph Processing Tool (<code>gpt</code>) to be installed and available in the system PATH.</li>
<li>The XML graph must contain nodes with IDs 'Read' and 'SnaphuExport' for the function to work correctly.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="k">def</span><span class="w"> </span><span class="nf">snaphu_export</span><span class="p">(</span><span class="n">xml_path</span><span class="p">,</span> <span class="n">new_input_file</span><span class="p">,</span> <span class="n">new_target_folder</span><span class="p">):</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="sd">    Modify a SNAP XML graph to update input and output paths, then execute it using GPT.</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a><span class="sd">    This function updates the SNAP XML workflow file by:</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a><span class="sd">    - Replacing the file path in the &#39;Read&#39; node with the given input file.</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a><span class="sd">    - Replacing the target folder in the &#39;SnaphuExport&#39; node with the given output folder.</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a><span class="sd">    After updating, it saves the modified XML and runs the graph using the `gpt` command-line tool.</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a><span class="sd">    xml_path : str</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a><span class="sd">        Path to the SNAP XML graph file to be modified and executed.</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a><span class="sd">    new_input_file : str</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a><span class="sd">        Path to the new input file (to replace the one in the &#39;Read&#39; node).</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a><span class="sd">    new_target_folder : str</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a><span class="sd">        Path to the new target folder (to replace the one in the &#39;SnaphuExport&#39; node).</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a><span class="sd">    -------</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a><span class="sd">    None</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a><span class="sd">        The function prints progress updates and the output of the `gpt` execution.</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a><span class="sd">    Raises</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a><span class="sd">    ------</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a><span class="sd">    FileNotFoundError</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a><span class="sd">        If the provided `xml_path` does not exist.</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a><span class="sd">    xml.etree.ElementTree.ParseError</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a><span class="sd">        If the XML file cannot be parsed.</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a><span class="sd">    subprocess.CalledProcessError</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a><span class="sd">        If the `gpt` command execution fails.</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a><span class="sd">    -----</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a><span class="sd">    - Requires SNAP&#39;s Graph Processing Tool (`gpt`) to be installed and available in the system PATH.</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a><span class="sd">    - The XML graph must contain nodes with IDs &#39;Read&#39; and &#39;SnaphuExport&#39; for the function to work correctly.</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Snaphu exporting...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>    <span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">xml_path</span><span class="p">)</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>    <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;.//node[@id=&#39;Read&#39;]/parameters/file&quot;</span><span class="p">):</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a>        <span class="n">node</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">new_input_file</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;.//node[@id=&#39;SnaphuExport&#39;]/parameters/targetFolder&quot;</span><span class="p">):</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a>        <span class="n">node</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">new_target_folder</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a>    <span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">xml_path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a>    <span class="n">gpt_command</span> <span class="o">=</span> <span class="s2">&quot;gpt&quot;</span>  
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="n">gpt_command</span><span class="p">,</span> <span class="n">xml_path</span><span class="p">],</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Processing complete.</span><span class="se">\n</span><span class="s2">Output:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.snaphu_import" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">snaphu_import</span><span class="p">(</span><span class="n">source_product</span><span class="p">,</span> <span class="n">unwrapped_product</span><span class="p">)</span></code>

<a href="#pysarflow.slc.snaphu_import" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Import SNAPHU unwrapped interferogram results back into SNAP.</p>
<p>This function uses SNAP's Graph Processing Framework (GPF) to merge the 
unwrapped interferogram produced by SNAPHU with the original source product. 
The resulting product contains the unwrapped phase information, making it 
available for further processing within SNAP.</p>
<h4 id="pysarflow.slc.snaphu_import--parameters">Parameters<a class="headerlink" href="#pysarflow.slc.snaphu_import--parameters" title="Permanent link">&para;</a></h4>
<p>source_product : snappy.Product
    The original interferogram product before SNAPHU unwrapping.
unwrapped_product : snappy.Product
    The product containing the SNAPHU unwrapped interferogram.</p>
<h4 id="pysarflow.slc.snaphu_import--returns">Returns<a class="headerlink" href="#pysarflow.slc.snaphu_import--returns" title="Permanent link">&para;</a></h4>
<p>snappy.Product
    A SNAP product containing the imported unwrapped phase data.</p>
<h4 id="pysarflow.slc.snaphu_import--notes">Notes<a class="headerlink" href="#pysarflow.slc.snaphu_import--notes" title="Permanent link">&para;</a></h4>
<ul>
<li>The parameter <code>'doNotKeepWrapped'</code> is set to False to keep the wrapped phase 
  along with the unwrapped phase.</li>
<li>Requires SNAP's snappy module and the GPF operator <code>'SnaphuImport'</code>.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span>
<span class="normal"><a href="#__codelineno-0-918">918</a></span>
<span class="normal"><a href="#__codelineno-0-919">919</a></span>
<span class="normal"><a href="#__codelineno-0-920">920</a></span>
<span class="normal"><a href="#__codelineno-0-921">921</a></span>
<span class="normal"><a href="#__codelineno-0-922">922</a></span>
<span class="normal"><a href="#__codelineno-0-923">923</a></span>
<span class="normal"><a href="#__codelineno-0-924">924</a></span>
<span class="normal"><a href="#__codelineno-0-925">925</a></span>
<span class="normal"><a href="#__codelineno-0-926">926</a></span>
<span class="normal"><a href="#__codelineno-0-927">927</a></span>
<span class="normal"><a href="#__codelineno-0-928">928</a></span>
<span class="normal"><a href="#__codelineno-0-929">929</a></span>
<span class="normal"><a href="#__codelineno-0-930">930</a></span>
<span class="normal"><a href="#__codelineno-0-931">931</a></span>
<span class="normal"><a href="#__codelineno-0-932">932</a></span>
<span class="normal"><a href="#__codelineno-0-933">933</a></span>
<span class="normal"><a href="#__codelineno-0-934">934</a></span>
<span class="normal"><a href="#__codelineno-0-935">935</a></span>
<span class="normal"><a href="#__codelineno-0-936">936</a></span>
<span class="normal"><a href="#__codelineno-0-937">937</a></span>
<span class="normal"><a href="#__codelineno-0-938">938</a></span>
<span class="normal"><a href="#__codelineno-0-939">939</a></span>
<span class="normal"><a href="#__codelineno-0-940">940</a></span>
<span class="normal"><a href="#__codelineno-0-941">941</a></span>
<span class="normal"><a href="#__codelineno-0-942">942</a></span>
<span class="normal"><a href="#__codelineno-0-943">943</a></span>
<span class="normal"><a href="#__codelineno-0-944">944</a></span>
<span class="normal"><a href="#__codelineno-0-945">945</a></span>
<span class="normal"><a href="#__codelineno-0-946">946</a></span>
<span class="normal"><a href="#__codelineno-0-947">947</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-914" name="__codelineno-0-914"></a><span class="k">def</span><span class="w"> </span><span class="nf">snaphu_import</span><span class="p">(</span><span class="n">source_product</span><span class="p">,</span> <span class="n">unwrapped_product</span><span class="p">):</span> 
<a id="__codelineno-0-915" name="__codelineno-0-915"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a><span class="sd">    Import SNAPHU unwrapped interferogram results back into SNAP.</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a><span class="sd">    This function uses SNAP&#39;s Graph Processing Framework (GPF) to merge the </span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a><span class="sd">    unwrapped interferogram produced by SNAPHU with the original source product. </span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a><span class="sd">    The resulting product contains the unwrapped phase information, making it </span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a><span class="sd">    available for further processing within SNAP.</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a><span class="sd">    source_product : snappy.Product</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a><span class="sd">        The original interferogram product before SNAPHU unwrapping.</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a><span class="sd">    unwrapped_product : snappy.Product</span>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a><span class="sd">        The product containing the SNAPHU unwrapped interferogram.</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a><span class="sd">    -------</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a><span class="sd">    snappy.Product</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a><span class="sd">        A SNAP product containing the imported unwrapped phase data.</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a><span class="sd">    -----</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a><span class="sd">    - The parameter `&#39;doNotKeepWrapped&#39;` is set to False to keep the wrapped phase </span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a><span class="sd">      along with the unwrapped phase.</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="sd">    - Requires SNAP&#39;s snappy module and the GPF operator `&#39;SnaphuImport&#39;`.</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="sd">    &quot;&quot;&quot;</span> 
<a id="__codelineno-0-941" name="__codelineno-0-941"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SNAPHU importing...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;doNotKeepWrapped&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a>    <span class="n">products</span> <span class="o">=</span> <span class="p">[</span><span class="n">source_product</span><span class="p">,</span> <span class="n">unwrapped_product</span><span class="p">]</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s1">&#39;SnaphuImport&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">products</span><span class="p">)</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SNAPHU imported...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a>    <span class="k">return</span> <span class="n">output</span>  
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.snaphu_unwrapping" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">snaphu_unwrapping</span><span class="p">(</span><span class="n">conf_file_path</span><span class="p">,</span> <span class="n">snaphu_exe_path</span><span class="p">,</span> <span class="n">output_directory</span><span class="p">)</span></code>

<a href="#pysarflow.slc.snaphu_unwrapping" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Run the SNAPHU unwrapping process using a configuration file.</p>
<p>This function reads a SNAPHU configuration file, extracts the command line 
arguments, and executes the SNAPHU binary with those arguments in the specified 
output directory. It ensures the working directory exists before execution and 
reports success or failure after completion.</p>
<h4 id="pysarflow.slc.snaphu_unwrapping--parameters">Parameters<a class="headerlink" href="#pysarflow.slc.snaphu_unwrapping--parameters" title="Permanent link">&para;</a></h4>
<p>conf_file_path : str
    Path to the SNAPHU configuration file (typically generated by SNAP or manually prepared).
snaphu_exe_path : str
    Path to the SNAPHU executable to be used for unwrapping.
output_directory : str
    Directory where SNAPHU will be executed and output files will be stored.</p>
<h4 id="pysarflow.slc.snaphu_unwrapping--returns">Returns<a class="headerlink" href="#pysarflow.slc.snaphu_unwrapping--returns" title="Permanent link">&para;</a></h4>
<p>bool
    True if SNAPHU unwrapping completed successfully (return code 0), 
    False otherwise.</p>
<h4 id="pysarflow.slc.snaphu_unwrapping--raises">Raises<a class="headerlink" href="#pysarflow.slc.snaphu_unwrapping--raises" title="Permanent link">&para;</a></h4>
<p>FileNotFoundError
    If the configuration file does not exist.
IndexError
    If the configuration file has fewer than 7 lines (expected command at line 7).
subprocess.SubprocessError
    If there is an unexpected error while executing the SNAPHU command.</p>
<h4 id="pysarflow.slc.snaphu_unwrapping--notes">Notes<a class="headerlink" href="#pysarflow.slc.snaphu_unwrapping--notes" title="Permanent link">&para;</a></h4>
<ul>
<li>The function assumes that the unwrapping command is located on line 7 of the configuration file.</li>
<li>Any leading '#' or 'snaphu' prefixes in the command line will be stripped before execution.</li>
<li>Requires SNAPHU to be compiled and available at the specified <code>snaphu_exe_path</code>.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span>
<span class="normal"><a href="#__codelineno-0-844">844</a></span>
<span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span>
<span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span>
<span class="normal"><a href="#__codelineno-0-872">872</a></span>
<span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span>
<span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-838" name="__codelineno-0-838"></a><span class="k">def</span><span class="w"> </span><span class="nf">snaphu_unwrapping</span><span class="p">(</span><span class="n">conf_file_path</span><span class="p">,</span> <span class="n">snaphu_exe_path</span><span class="p">,</span> <span class="n">output_directory</span><span class="p">):</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a><span class="sd">    Run the SNAPHU unwrapping process using a configuration file.</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a><span class="sd">    This function reads a SNAPHU configuration file, extracts the command line </span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a><span class="sd">    arguments, and executes the SNAPHU binary with those arguments in the specified </span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a><span class="sd">    output directory. It ensures the working directory exists before execution and </span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a><span class="sd">    reports success or failure after completion.</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a><span class="sd">    conf_file_path : str</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a><span class="sd">        Path to the SNAPHU configuration file (typically generated by SNAP or manually prepared).</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a><span class="sd">    snaphu_exe_path : str</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="sd">        Path to the SNAPHU executable to be used for unwrapping.</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a><span class="sd">    output_directory : str</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a><span class="sd">        Directory where SNAPHU will be executed and output files will be stored.</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a><span class="sd">    -------</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a><span class="sd">    bool</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a><span class="sd">        True if SNAPHU unwrapping completed successfully (return code 0), </span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a><span class="sd">        False otherwise.</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="sd">    Raises</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a><span class="sd">    ------</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a><span class="sd">    FileNotFoundError</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a><span class="sd">        If the configuration file does not exist.</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="sd">    IndexError</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="sd">        If the configuration file has fewer than 7 lines (expected command at line 7).</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a><span class="sd">    subprocess.SubprocessError</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a><span class="sd">        If there is an unexpected error while executing the SNAPHU command.</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="sd">    -----</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a><span class="sd">    - The function assumes that the unwrapping command is located on line 7 of the configuration file.</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="sd">    - Any leading &#39;#&#39; or &#39;snaphu&#39; prefixes in the command line will be stripped before execution.</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a><span class="sd">    - Requires SNAPHU to be compiled and available at the specified `snaphu_exe_path`.</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">conf_file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a>        <span class="n">lines</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">:</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a>        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Configuration file doesn&#39;t have enough lines&quot;</span><span class="p">)</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a>    <span class="n">command_line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a>    <span class="k">if</span> <span class="n">command_line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">):</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a>        <span class="n">command_line</span> <span class="o">=</span> <span class="n">command_line</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a>    <span class="k">if</span> <span class="n">command_line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;snaphu&#39;</span><span class="p">):</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a>        <span class="n">command_line</span> <span class="o">=</span> <span class="n">command_line</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a>    <span class="n">full_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">snaphu_exe_path</span><span class="si">}</span><span class="s1">&quot; </span><span class="si">{</span><span class="n">command_line</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running SNAPHU command: </span><span class="si">{</span><span class="n">full_command</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Working directory: </span><span class="si">{</span><span class="n">output_directory</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a>    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_directory</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a>        <span class="n">full_command</span><span class="p">,</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a>        <span class="n">cwd</span><span class="o">=</span><span class="n">output_directory</span><span class="p">,</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a>        <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a>        <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a>        <span class="n">text</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>    <span class="p">)</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a>    <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SNAPHU unwrapping completed successfully!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SNAPHU unwrapping failed!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Return code:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span><span class="p">)</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a>    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.temporal_baseline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">temporal_baseline</span><span class="p">(</span><span class="n">product1_path</span><span class="p">,</span> <span class="n">product2_path</span><span class="p">)</span></code>

<a href="#pysarflow.slc.temporal_baseline" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Calculate and print the temporal baseline between two Sentinel-1 products.</p>
<p>The temporal baseline is defined as the absolute difference in days between 
the acquisition times (start times) of the two SAR products. This metric is 
commonly used in interferometric SAR (InSAR) analysis to assess the temporal 
separation between image acquisitions.</p>
<h4 id="pysarflow.slc.temporal_baseline--args">Args:<a class="headerlink" href="#pysarflow.slc.temporal_baseline--args" title="Permanent link">&para;</a></h4>
<p>product1_path : str
    File path to the first Sentinel-1 product (e.g., the master image).
product2_path : str
    File path to the second Sentinel-1 product (e.g., the slave image).</p>
<p>Returns:
It prints the temporal baseline
None
    The function prints the temporal baseline in days and does not return a value.</p>
<h4 id="pysarflow.slc.temporal_baseline--notes">Notes:<a class="headerlink" href="#pysarflow.slc.temporal_baseline--notes" title="Permanent link">&para;</a></h4>
<ul>
<li>This function uses <code>read_product</code> to open the Sentinel-1 products.</li>
<li>It assumes that both products contain valid start time metadata.</li>
<li>Resources are released after processing by calling <code>.dispose()</code> on each product.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="k">def</span><span class="w"> </span><span class="nf">temporal_baseline</span><span class="p">(</span><span class="n">product1_path</span><span class="p">,</span> <span class="n">product2_path</span><span class="p">):</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">    Calculate and print the temporal baseline between two Sentinel-1 products.</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">    The temporal baseline is defined as the absolute difference in days between </span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a><span class="sd">    the acquisition times (start times) of the two SAR products. This metric is </span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="sd">    commonly used in interferometric SAR (InSAR) analysis to assess the temporal </span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="sd">    separation between image acquisitions.</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="sd">    product1_path : str</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">        File path to the first Sentinel-1 product (e.g., the master image).</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">    product2_path : str</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">        File path to the second Sentinel-1 product (e.g., the slave image).</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">    It prints the temporal baseline</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="sd">    None</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="sd">        The function prints the temporal baseline in days and does not return a value.</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">    -----</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">    - This function uses `read_product` to open the Sentinel-1 products.</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">    - It assumes that both products contain valid start time metadata.</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">    - Resources are released after processing by calling `.dispose()` on each product.</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>    <span class="n">product1</span> <span class="o">=</span>  <span class="n">read_slc_product</span><span class="p">(</span><span class="n">product1_path</span><span class="p">)</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>    <span class="n">product2</span> <span class="o">=</span>  <span class="n">read_slc_product</span><span class="p">(</span><span class="n">product2_path</span><span class="p">)</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>    <span class="n">master_time</span> <span class="o">=</span> <span class="n">product1</span><span class="o">.</span><span class="n">getStartTime</span><span class="p">()</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>    <span class="n">slave_time</span> <span class="o">=</span> <span class="n">product2</span><span class="o">.</span><span class="n">getStartTime</span><span class="p">()</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>    <span class="n">temporal_baseline</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">slave_time</span><span class="o">.</span><span class="n">getMJD</span><span class="p">()</span> <span class="o">-</span> <span class="n">master_time</span><span class="o">.</span><span class="n">getMJD</span><span class="p">())</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Temporal Baseline: </span><span class="si">{</span><span class="n">temporal_baseline</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> days&quot;</span><span class="p">)</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>    <span class="n">product1</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>    <span class="n">product2</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.terrain_correction_slc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">terrain_correction_slc</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">DEM</span><span class="p">)</span></code>

<a href="#pysarflow.slc.terrain_correction_slc" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Apply terrain correction to a SAR product using a specified DEM.</p>
<p>Terrain correction removes geometric distortions caused by topography and sensor 
viewing geometry. This step geocodes the image into a map coordinate system 
and ensures that pixel locations align with their true geographic position.</p>
<h4 id="pysarflow.slc.terrain_correction_slc--args">Args<a class="headerlink" href="#pysarflow.slc.terrain_correction_slc--args" title="Permanent link">&para;</a></h4>
<p>product : snappy.Product
    The SAR product to which terrain correction will be applied.
DEM : str
    The name of the Digital Elevation Model (e.g., 'SRTM 3Sec' or a custom DEM) 
    to be used for terrain correction.</p>
<h4 id="pysarflow.slc.terrain_correction_slc--returns">Returns<a class="headerlink" href="#pysarflow.slc.terrain_correction_slc--returns" title="Permanent link">&para;</a></h4>
<p>snappy.Product
    The terrain-corrected product.</p>
<h4 id="pysarflow.slc.terrain_correction_slc--notes">Notes<a class="headerlink" href="#pysarflow.slc.terrain_correction_slc--notes" title="Permanent link">&para;</a></h4>
<ul>
<li>The DEM is saved as part of the output product.</li>
<li>Areas with missing DEM values are assigned an external no-data value (0.0).</li>
<li>This step is typically performed near the end of the preprocessing chain to 
  produce a geocoded product suitable for analysis and visualization.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-948">948</a></span>
<span class="normal"><a href="#__codelineno-0-949">949</a></span>
<span class="normal"><a href="#__codelineno-0-950">950</a></span>
<span class="normal"><a href="#__codelineno-0-951">951</a></span>
<span class="normal"><a href="#__codelineno-0-952">952</a></span>
<span class="normal"><a href="#__codelineno-0-953">953</a></span>
<span class="normal"><a href="#__codelineno-0-954">954</a></span>
<span class="normal"><a href="#__codelineno-0-955">955</a></span>
<span class="normal"><a href="#__codelineno-0-956">956</a></span>
<span class="normal"><a href="#__codelineno-0-957">957</a></span>
<span class="normal"><a href="#__codelineno-0-958">958</a></span>
<span class="normal"><a href="#__codelineno-0-959">959</a></span>
<span class="normal"><a href="#__codelineno-0-960">960</a></span>
<span class="normal"><a href="#__codelineno-0-961">961</a></span>
<span class="normal"><a href="#__codelineno-0-962">962</a></span>
<span class="normal"><a href="#__codelineno-0-963">963</a></span>
<span class="normal"><a href="#__codelineno-0-964">964</a></span>
<span class="normal"><a href="#__codelineno-0-965">965</a></span>
<span class="normal"><a href="#__codelineno-0-966">966</a></span>
<span class="normal"><a href="#__codelineno-0-967">967</a></span>
<span class="normal"><a href="#__codelineno-0-968">968</a></span>
<span class="normal"><a href="#__codelineno-0-969">969</a></span>
<span class="normal"><a href="#__codelineno-0-970">970</a></span>
<span class="normal"><a href="#__codelineno-0-971">971</a></span>
<span class="normal"><a href="#__codelineno-0-972">972</a></span>
<span class="normal"><a href="#__codelineno-0-973">973</a></span>
<span class="normal"><a href="#__codelineno-0-974">974</a></span>
<span class="normal"><a href="#__codelineno-0-975">975</a></span>
<span class="normal"><a href="#__codelineno-0-976">976</a></span>
<span class="normal"><a href="#__codelineno-0-977">977</a></span>
<span class="normal"><a href="#__codelineno-0-978">978</a></span>
<span class="normal"><a href="#__codelineno-0-979">979</a></span>
<span class="normal"><a href="#__codelineno-0-980">980</a></span>
<span class="normal"><a href="#__codelineno-0-981">981</a></span>
<span class="normal"><a href="#__codelineno-0-982">982</a></span>
<span class="normal"><a href="#__codelineno-0-983">983</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-948" name="__codelineno-0-948"></a><span class="k">def</span><span class="w"> </span><span class="nf">terrain_correction_slc</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">DEM</span><span class="p">):</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a><span class="sd">    Apply terrain correction to a SAR product using a specified DEM.</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a><span class="sd">    Terrain correction removes geometric distortions caused by topography and sensor </span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a><span class="sd">    viewing geometry. This step geocodes the image into a map coordinate system </span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="sd">    and ensures that pixel locations align with their true geographic position.</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="sd">    Args</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a><span class="sd">    product : snappy.Product</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="sd">        The SAR product to which terrain correction will be applied.</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a><span class="sd">    DEM : str</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a><span class="sd">        The name of the Digital Elevation Model (e.g., &#39;SRTM 3Sec&#39; or a custom DEM) </span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a><span class="sd">        to be used for terrain correction.</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a><span class="sd">    -------</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a><span class="sd">    snappy.Product</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a><span class="sd">        The terrain-corrected product.</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a><span class="sd">    -----</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a><span class="sd">    - The DEM is saved as part of the output product.</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a><span class="sd">    - Areas with missing DEM values are assigned an external no-data value (0.0).</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a><span class="sd">    - This step is typically performed near the end of the preprocessing chain to </span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a><span class="sd">      produce a geocoded product suitable for analysis and visualization.</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Applying Terrain Correction...&#39;</span><span class="p">)</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;demName&#39;</span><span class="p">,</span> <span class="n">DEM</span><span class="p">)</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;saveDEM&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;externalDEMNoDataValue&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;Terrain-Correction&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Terrain Correction applied!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.topsar_deburst" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">topsar_deburst</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">polarization</span><span class="p">)</span></code>

<a href="#pysarflow.slc.topsar_deburst" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Apply TOPSAR deburst operation to a Sentinel-1 product.</p>
<p>This function removes burst discontinuities in TOPSAR acquisitions 
by merging bursts into a seamless image for the specified polarization. 
It is a necessary preprocessing step for Sentinel-1 TOPSAR IW and EW 
data before further interferometric or geocoding analysis.</p>
<h4 id="pysarflow.slc.topsar_deburst--args">Args<a class="headerlink" href="#pysarflow.slc.topsar_deburst--args" title="Permanent link">&para;</a></h4>
<p>product : snappy.Product
    The input Sentinel-1 product to which the deburst operation will be applied.
polarization : str
    The polarization channel to process (e.g., 'VV', 'VH', 'HH', 'HV').</p>
<h4 id="pysarflow.slc.topsar_deburst--returns">Returns<a class="headerlink" href="#pysarflow.slc.topsar_deburst--returns" title="Permanent link">&para;</a></h4>
<p>snappy.Product
    The deburst-processed Sentinel-1 product.</p>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="k">def</span><span class="w"> </span><span class="nf">topsar_deburst</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">polarization</span><span class="p">):</span>  
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">    Apply TOPSAR deburst operation to a Sentinel-1 product.</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">    This function removes burst discontinuities in TOPSAR acquisitions </span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">    by merging bursts into a seamless image for the specified polarization. </span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="sd">    It is a necessary preprocessing step for Sentinel-1 TOPSAR IW and EW </span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">    data before further interferometric or geocoding analysis.</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="sd">    Args</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="sd">    product : snappy.Product</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="sd">        The input Sentinel-1 product to which the deburst operation will be applied.</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="sd">    polarization : str</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">        The polarization channel to process (e.g., &#39;VV&#39;, &#39;VH&#39;, &#39;HH&#39;, &#39;HV&#39;).</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">    -------</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">    snappy.Product</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">        The deburst-processed Sentinel-1 product.</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Apply TOPSAR Deburst...&#39;</span><span class="p">)</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Polarisations&quot;</span><span class="p">,</span> <span class="n">polarization</span><span class="p">)</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;TOPSAR-Deburst&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;TOPSAR Deburst applied!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>    <span class="k">return</span> <span class="n">output</span>  
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.slc.topsar_split" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">topsar_split</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">burst_dict</span><span class="p">,</span> <span class="n">pols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_complex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#pysarflow.slc.topsar_split" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Run TOPSAR-Split using burst indices from burst_for_geometry(...).</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
              –
              <div class="doc-md-description">
                <p>Input SAR product. Output of the burst_for_geometry</p>
              </div>
            </li>
            <li>
              <b><code>burst_dict</code></b>
              –
              <div class="doc-md-description">
                <p>output from the burst_for_geometry function</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>        <p>Returns
    Product restricted to the specified sub-swath, burst range, and polarisations.</p>


            <details class="quote">
              <summary>Source code in <code>pysarflow/slc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="k">def</span><span class="w"> </span><span class="nf">topsar_split</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">burst_dict</span><span class="p">,</span> <span class="n">pols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_complex</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">    Run TOPSAR-Split using burst indices from burst_for_geometry(...).</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">      product : Input SAR product. Output of the burst_for_geometry</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="sd">      burst_dict : output from the burst_for_geometry function</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><span class="sd">      pols = polarization</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="sd">        Product restricted to the specified sub-swath, burst range, and polarisations.</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>    <span class="n">band</span> <span class="o">=</span> <span class="n">burst_dict</span><span class="p">[</span><span class="s1">&#39;band_name&#39;</span><span class="p">]</span>              <span class="c1"># e.g. &#39;i_IW1_VH&#39;</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>    <span class="n">swath</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">iw</span> <span class="k">for</span> <span class="n">iw</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;IW1&#39;</span><span class="p">,</span><span class="s1">&#39;IW2&#39;</span><span class="p">,</span><span class="s1">&#39;IW3&#39;</span><span class="p">,</span><span class="s1">&#39;EW1&#39;</span><span class="p">,</span><span class="s1">&#39;EW2&#39;</span><span class="p">,</span><span class="s1">&#39;EW3&#39;</span><span class="p">,</span><span class="s1">&#39;EW4&#39;</span><span class="p">,</span><span class="s1">&#39;EW5&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">iw</span> <span class="ow">in</span> <span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>    <span class="k">if</span> <span class="n">pols</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>        <span class="n">pols</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>              <span class="c1"># infer polarisation from band name</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>    <span class="k">if</span> <span class="n">burst_dict</span><span class="p">[</span><span class="s1">&#39;geom_type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Point&#39;</span><span class="p">:</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>        <span class="n">fb</span> <span class="o">=</span> <span class="n">lb</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">burst_dict</span><span class="p">[</span><span class="s1">&#39;burst&#39;</span><span class="p">])</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>        <span class="n">fb</span><span class="p">,</span> <span class="n">lb</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">burst_dict</span><span class="p">[</span><span class="s1">&#39;firstBurst&#39;</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">burst_dict</span><span class="p">[</span><span class="s1">&#39;lastBurst&#39;</span><span class="p">])</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>        <span class="k">if</span> <span class="n">fb</span> <span class="o">&gt;</span> <span class="n">lb</span><span class="p">:</span> <span class="n">fb</span><span class="p">,</span> <span class="n">lb</span> <span class="o">=</span> <span class="n">lb</span><span class="p">,</span> <span class="n">fb</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>    <span class="c1"># Build parameters</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">HashMap</span><span class="p">()</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;subswath&#39;</span><span class="p">,</span> <span class="n">swath</span><span class="p">)</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;selectedPolarisations&#39;</span><span class="p">,</span> <span class="n">pols</span><span class="p">)</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;firstBurstIndex&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">(</span><span class="n">fb</span><span class="p">))</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;lastBurstIndex&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">(</span><span class="n">lb</span><span class="p">))</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;outputComplex&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="n">output_complex</span><span class="p">))</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>    <span class="c1"># Run TOPSAR-Split</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s2">&quot;TOPSAR-Split&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TOPSAR-Split applied: </span><span class="si">{</span><span class="n">swath</span><span class="si">}</span><span class="s2"> bursts </span><span class="si">{</span><span class="n">fb</span><span class="si">}</span><span class="s2">–</span><span class="si">{</span><span class="n">lb</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">pols</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pysarflow.utils"></a>
    <div class="doc doc-contents first">

        <p>It includes common or secondary functionalities that would be used in other modules.</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="pysarflow.utils.convert_0_to_nan" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_0_to_nan</span><span class="p">(</span><span class="n">product</span><span class="p">)</span></code>

<a href="#pysarflow.utils.convert_0_to_nan" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Convert all zero values in the bands of a Sentinel-1 product to NaN (represented as -9999.0).</p>
<p>This function iterates over all bands in the input product and replaces
pixels with a value of 0 with -9999.0, which is commonly used as the NoData value
in SNAP products. The data type of each band is set to float32 to accommodate NaN values.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>product</code></b>
                  (<code><span title="esa_snappy.Product">Product</span></code>)
              –
              <div class="doc-md-description">
                <p>Sentinel-1 product whose zero values need to be converted.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>esa_snappy.Product: A new product with zero values replaced by -9999.0 in all bands.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="k">def</span><span class="w"> </span><span class="nf">convert_0_to_nan</span><span class="p">(</span><span class="n">product</span><span class="p">):</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">    Convert all zero values in the bands of a Sentinel-1 product to NaN (represented as -9999.0).</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">    This function iterates over all bands in the input product and replaces</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">    pixels with a value of 0 with -9999.0, which is commonly used as the NoData value</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">    in SNAP products. The data type of each band is set to float32 to accommodate NaN values.</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">        product (esa_snappy.Product): Sentinel-1 product whose zero values need to be converted.</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">        esa_snappy.Product: A new product with zero values replaced by -9999.0 in all bands.</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>    <span class="n">band_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">getBandNames</span><span class="p">())</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="n">BandDescriptor</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s1">&#39;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&#39;</span><span class="p">)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span class="c1"># Create Java array of BandDescriptor</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="n">Array</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;org.esa.snap.core.gpf.common.BandMathsOp$BandDescriptor&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">band_names</span><span class="p">))</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">band_names</span><span class="p">):</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>        <span class="n">band_def</span> <span class="o">=</span> <span class="n">BandDescriptor</span><span class="p">()</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span class="n">band_def</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>   <span class="c1"># avoid overwrite</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>        <span class="n">band_def</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;float32&#39;</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="n">band_def</span><span class="o">.</span><span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> == 0 ? -9999.0 : </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>        <span class="n">band_def</span><span class="o">.</span><span class="n">noDataValue</span> <span class="o">=</span> <span class="o">-</span><span class="mf">9999.0</span>     <span class="c1"># match replacement value</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>        <span class="n">Array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">band_def</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>    <span class="c1"># Parameters HashMap</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="n">parameters</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s1">&#39;java.util.HashMap&#39;</span><span class="p">)()</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="n">parameters</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;targetBands&#39;</span><span class="p">,</span> <span class="n">Array</span><span class="p">)</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span class="c1"># Run BandMaths</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>    <span class="n">updated_product</span> <span class="o">=</span> <span class="n">GPF</span><span class="o">.</span><span class="n">createProduct</span><span class="p">(</span><span class="s1">&#39;BandMaths&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>    <span class="k">return</span> <span class="n">updated_product</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.utils.extract_bbox" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_bbox</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>

<a href="#pysarflow.utils.extract_bbox" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Extracts a bounding box from a shapefile and returns it as a WKT polygon.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>file_path</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>Path to the shapefile (.shp) containing the boundary geometry.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>str</code></b>              –
              <div class="doc-md-description">
                <p>WKT string representing the bounding polygon for use in SNAP SubsetOp.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>pysarflow/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="k">def</span><span class="w"> </span><span class="nf">extract_bbox</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">    Extracts a bounding box from a shapefile and returns it as a WKT polygon.</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">        file_path (str): Path to the shapefile (.shp) containing the boundary geometry.</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="sd">        str: WKT string representing the bounding polygon for use in SNAP SubsetOp.</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="n">r</span> <span class="o">=</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="s2">&quot;data/island_boundary2.shp&quot;</span><span class="p">)</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="n">g</span><span class="o">=</span><span class="p">[]</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">shapes</span><span class="p">():</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="n">g</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pygeoif</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">as_shape</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="n">m</span> <span class="o">=</span> <span class="n">pygeoif</span><span class="o">.</span><span class="n">MultiPoint</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="n">wkt</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;MULTIPOINT&quot;</span><span class="p">,</span><span class="s2">&quot;POLYGON(&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="n">SubsetOp</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s1">&#39;org.esa.snap.core.gpf.common.SubsetOp&#39;</span><span class="p">)</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span class="n">bounding_wkt</span> <span class="o">=</span> <span class="n">wkt</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="k">return</span> <span class="n">bounding_wkt</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.utils.extract_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_info</span><span class="p">(</span><span class="n">product_path</span><span class="p">)</span></code>

<a href="#pysarflow.utils.extract_info" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Extract and display basic information about a Sentinel-1 product.</p>
<h4 id="pysarflow.utils.extract_info--parameters">Parameters<a class="headerlink" href="#pysarflow.utils.extract_info--parameters" title="Permanent link">&para;</a></h4>
<p>product_path : str
    Path to the Sentinel-1 product file.</p>
<h4 id="pysarflow.utils.extract_info--prints">Prints<a class="headerlink" href="#pysarflow.utils.extract_info--prints" title="Permanent link">&para;</a></h4>
<ul>
<li>Product name</li>
<li>Product type</li>
<li>Product description</li>
<li>Scene width and height</li>
<li>Acquisition start and end time</li>
<li>Number of bands and their names</li>
</ul>
<h4 id="pysarflow.utils.extract_info--notes">Notes<a class="headerlink" href="#pysarflow.utils.extract_info--notes" title="Permanent link">&para;</a></h4>
<p>This function uses the SNAP API to read the product and display its metadata. 
It disposes of the product after extraction to free resources. 
Useful for quickly inspecting a product before further processing.</p>


            <details class="quote">
              <summary>Source code in <code>pysarflow/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="k">def</span><span class="w"> </span><span class="nf">extract_info</span><span class="p">(</span><span class="n">product_path</span><span class="p">):</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">    Extract and display basic information about a Sentinel-1 product.</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">    product_path : str</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">        Path to the Sentinel-1 product file.</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">    Prints</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">    ------</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">    - Product name</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">    - Product type</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">    - Product description</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">    - Scene width and height</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">    - Acquisition start and end time</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">    - Number of bands and their names</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    -----</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">    This function uses the SNAP API to read the product and display its metadata. </span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">    It disposes of the product after extraction to free resources. </span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">    Useful for quickly inspecting a product before further processing.</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>    <span class="n">product</span> <span class="o">=</span> <span class="n">read_product</span><span class="p">(</span><span class="n">product_path</span><span class="p">)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Product name:&quot;</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Product type:&quot;</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">getProductType</span><span class="p">())</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Description:&quot;</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">getDescription</span><span class="p">())</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>    <span class="c1">#print(&quot;Beam Mode:&quot;, check_beam_mode(product_path))</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Scene width:&quot;</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">getSceneRasterWidth</span><span class="p">())</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Scene height:&quot;</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">getSceneRasterHeight</span><span class="p">())</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>    <span class="n">metadata</span> <span class="o">=</span> <span class="n">product</span><span class="o">.</span><span class="n">getMetadataRoot</span><span class="p">()</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Start time:&quot;</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">getStartTime</span><span class="p">())</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;End time:&quot;</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">getEndTime</span><span class="p">())</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Bands&quot;</span><span class="p">)</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>    <span class="n">band_names</span> <span class="o">=</span> <span class="n">product</span><span class="o">.</span><span class="n">getBandNames</span><span class="p">()</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span class="n">number_bands</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">band_names</span><span class="p">))</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of bands:&quot;</span><span class="p">,</span> <span class="n">number_bands</span><span class="p">)</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">number_bands</span><span class="p">:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>        <span class="n">band</span> <span class="o">=</span> <span class="n">product</span><span class="o">.</span><span class="n">getBand</span><span class="p">(</span><span class="n">band_names</span><span class="p">[</span><span class="n">count</span><span class="p">])</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Band name:&quot;</span><span class="p">,</span> <span class="n">band</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>    <span class="n">product</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pysarflow.utils.get_subswath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_subswath</span><span class="p">(</span><span class="n">aoi</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span></code>

<a href="#pysarflow.utils.get_subswath" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Identify the Sentinel-1 subswath (e.g., IW1, IW2, or IW3) covering the given Area of Interest (AOI).</p>
<p>This function determines which Sentinel-1 interferometric wide (IW) subswath contains 
the centroid of a given AOI. This is useful when selecting or cropping data specific 
to one of the three IW subswaths.</p>
<h4 id="pysarflow.utils.get_subswath--parameters">Parameters:<a class="headerlink" href="#pysarflow.utils.get_subswath--parameters" title="Permanent link">&para;</a></h4>
<p>aoi : str | shapely.geometry.Polygon | list[tuple[float, float]]
    The Area of Interest to test for subswath coverage. It can be:
    - A WKT polygon string (e.g., 'POLYGON((lon lat, lon lat, ...))')
    - A Shapely <code>Polygon</code> object
    - A list or tuple of (lon, lat) coordinate pairs</p>


<details class="product-" open>
  <summary>org.esa.snap.core.datamodel.Product</summary>
  <p>The Sentinel-1 product containing IW subswath bands.</p>
</details>        <h4 id="pysarflow.utils.get_subswath--returns">Returns:<a class="headerlink" href="#pysarflow.utils.get_subswath--returns" title="Permanent link">&para;</a></h4>
<p>result : str
    The name of the subswath ('IW1', 'IW2', or 'IW3') that contains the AOI centroid.
    Returns 'No subswath for the AOI' if none of the available subswaths cover it.</p>
<h4 id="pysarflow.utils.get_subswath--notes">Notes:<a class="headerlink" href="#pysarflow.utils.get_subswath--notes" title="Permanent link">&para;</a></h4>
<ul>
<li>The function uses the product's band names to infer available subswaths.</li>
<li>It checks whether the AOI centroid lies within the bounds of each subswath's geocoded raster.</li>
<li>Requires that the product bands include geocoding information.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pysarflow/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_subswath</span><span class="p">(</span><span class="n">aoi</span><span class="p">,</span> <span class="n">product</span><span class="p">):</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    Identify the Sentinel-1 subswath (e.g., IW1, IW2, or IW3) covering the given Area of Interest (AOI).</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    This function determines which Sentinel-1 interferometric wide (IW) subswath contains </span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    the centroid of a given AOI. This is useful when selecting or cropping data specific </span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">    to one of the three IW subswaths.</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    Parameters:</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">    aoi : str | shapely.geometry.Polygon | list[tuple[float, float]]</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">        The Area of Interest to test for subswath coverage. It can be:</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">        - A WKT polygon string (e.g., &#39;POLYGON((lon lat, lon lat, ...))&#39;)</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">        - A Shapely `Polygon` object</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">        - A list or tuple of (lon, lat) coordinate pairs</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    product : org.esa.snap.core.datamodel.Product</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">        The Sentinel-1 product containing IW subswath bands.</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">    -------</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">    result : str</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">        The name of the subswath (&#39;IW1&#39;, &#39;IW2&#39;, or &#39;IW3&#39;) that contains the AOI centroid.</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">        Returns &#39;No subswath for the AOI&#39; if none of the available subswaths cover it.</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    -----</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    - The function uses the product&#39;s band names to infer available subswaths.</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    - It checks whether the AOI centroid lies within the bounds of each subswath&#39;s geocoded raster.</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">    - Requires that the product bands include geocoding information.</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">aoi</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">aoi</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;POLYGON&#39;</span><span class="p">):</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span class="n">coords_str</span> <span class="o">=</span> <span class="n">aoi</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;POLYGON((&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;))&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>        <span class="n">coord_pairs</span> <span class="o">=</span> <span class="n">coords_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="n">coords</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>        <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">coord_pairs</span><span class="p">:</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>            <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">pair</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>            <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">))</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>        <span class="n">aoi_polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">aoi</span><span class="p">,</span> <span class="n">Polygon</span><span class="p">):</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>        <span class="n">aoi_polygon</span> <span class="o">=</span> <span class="n">aoi</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">aoi</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>        <span class="n">aoi_polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">aoi</span><span class="p">)</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;AOI must be a WKT string, Shapely Polygon, or list of (lon, lat) tuples&quot;</span><span class="p">)</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>    <span class="n">centroid</span> <span class="o">=</span> <span class="n">aoi_polygon</span><span class="o">.</span><span class="n">centroid</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="n">band_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">getBandNames</span><span class="p">())</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="n">subswaths</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>    <span class="k">for</span> <span class="n">band_name</span> <span class="ow">in</span> <span class="n">band_names</span><span class="p">:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>        <span class="k">if</span> <span class="s1">&#39;_IW&#39;</span> <span class="ow">in</span> <span class="n">band_name</span><span class="p">:</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>            <span class="n">sw_part</span> <span class="o">=</span> <span class="n">band_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_IW&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][:</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>            <span class="k">if</span> <span class="n">sw_part</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>                <span class="n">subswaths</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IW</span><span class="si">{</span><span class="n">sw_part</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;No subswath for the AOI&quot;</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="k">for</span> <span class="n">subswath</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">subswaths</span><span class="p">):</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="n">subswath_bands</span> <span class="o">=</span> <span class="p">[</span><span class="n">band</span> <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">band_names</span> <span class="k">if</span> <span class="sa">f</span><span class="s1">&#39;_IW</span><span class="si">{</span><span class="n">subswath</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">_&#39;</span> <span class="ow">in</span> <span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">subswath_bands</span><span class="p">:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>            <span class="k">continue</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="n">band</span> <span class="o">=</span> <span class="n">product</span><span class="o">.</span><span class="n">getBand</span><span class="p">(</span><span class="n">subswath_bands</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="n">geo_coding</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">getGeoCoding</span><span class="p">()</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="k">if</span> <span class="n">geo_coding</span><span class="p">:</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>            <span class="n">pixel_pos</span> <span class="o">=</span> <span class="n">geo_coding</span><span class="o">.</span><span class="n">getPixelPos</span><span class="p">(</span><span class="n">esa_snappy</span><span class="o">.</span><span class="n">GeoPos</span><span class="p">(</span><span class="n">centroid</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">centroid</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>            <span class="n">width</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">getRasterWidth</span><span class="p">()</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>            <span class="n">height</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">getRasterHeight</span><span class="p">()</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">pixel_pos</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">width</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">pixel_pos</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">:</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">subswath</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../dev/" class="btn btn-neutral float-right" title="Contribute">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rabinatwayana/pysarflow/" class="fa fa-code-fork" style="color: #fcfcfc"> rabinatwayana/pysarflow</a>
        </span>
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../dev/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
